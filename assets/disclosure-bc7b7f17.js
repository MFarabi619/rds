import{r as s,R as y}from"./index-580b8df0.js";import{l as j,j as N,L as E,y as x,T as U,o as S,c as H,u as C,d as g,D as T,C as K}from"./transition-df23ef1c.js";import{e as B,I as F,o as b,r as A}from"./use-event-listener-472363b9.js";import{s as W}from"./popover-2558df07.js";function pe({container:e,accept:t,walk:r,enabled:u=!0}){let c=s.useRef(t),l=s.useRef(r);s.useEffect(()=>{c.current=t,l.current=r},[t,r]),j(()=>{if(!e||!u)return;let n=B(e);if(!n)return;let o=c.current,a=l.current,d=Object.assign(v=>o(v),{acceptNode:o}),p=n.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,d,!1);for(;p.nextNode();)a(p.currentNode)},[e,u,c,l])}function Y(e){throw new Error("Unexpected object: "+e)}var _=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(_||{});function fe(e,t){let r=t.resolveItems();if(r.length<=0)return null;let u=t.resolveActiveIndex(),c=u??-1,l=(()=>{switch(e.focus){case 0:return r.findIndex(n=>!t.resolveDisabled(n));case 1:{let n=r.slice().reverse().findIndex((o,a,d)=>c!==-1&&d.length-a-1>=c?!1:!t.resolveDisabled(o));return n===-1?n:r.length-1-n}case 2:return r.findIndex((n,o)=>o<=c?!1:!t.resolveDisabled(n));case 3:{let n=r.slice().reverse().findIndex(o=>!t.resolveDisabled(o));return n===-1?n:r.length-1-n}case 4:return r.findIndex(n=>t.resolveId(n)===e.id);case 5:return null;default:Y(e)}})();return l===-1?u:l}function M(e){return[e.screenX,e.screenY]}function ve(){let e=s.useRef([-1,-1]);return{wasMoved(t){let r=M(t);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(t){e.current=M(t)}}}var O;let q=(O=y.startTransition)!=null?O:function(e){e()};var z=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(z||{}),Q=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(Q||{});let V={[0]:e=>({...e,disclosureState:C(e.disclosureState,{[0]:1,[1]:0})}),[1]:e=>e.disclosureState===1?e:{...e,disclosureState:1},[4](e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},[5](e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},[2](e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},[3](e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},h=s.createContext(null);h.displayName="DisclosureContext";function R(e){let t=s.useContext(h);if(t===null){let r=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,R),r}return t}let $=s.createContext(null);$.displayName="DisclosureAPIContext";function L(e){let t=s.useContext($);if(t===null){let r=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,L),r}return t}let w=s.createContext(null);w.displayName="DisclosurePanelContext";function X(){return s.useContext(w)}function Z(e,t){return C(t.type,V,e,t)}let G=s.Fragment;function J(e,t){let{defaultOpen:r=!1,...u}=e,c=s.useRef(null),l=x(t,U(f=>{c.current=f},e.as===void 0||e.as===s.Fragment)),n=s.useRef(null),o=s.useRef(null),a=s.useReducer(Z,{disclosureState:r?0:1,linkedPanel:!1,buttonRef:o,panelRef:n,buttonId:null,panelId:null}),[{disclosureState:d,buttonId:p},v]=a,I=S(f=>{v({type:1});let i=B(c);if(!i||!p)return;let m=(()=>f?f instanceof HTMLElement?f:f.current instanceof HTMLElement?f.current:i.getElementById(p):i.getElementById(p))();m==null||m.focus()}),P=s.useMemo(()=>({close:I}),[I]),k=s.useMemo(()=>({open:d===0,close:I}),[d,I]),D={ref:l};return y.createElement(h.Provider,{value:a},y.createElement($.Provider,{value:P},y.createElement(H,{value:C(d,{[0]:g.Open,[1]:g.Closed})},T({ourProps:D,theirProps:u,slot:k,defaultTag:G,name:"Disclosure"}))))}let ee="button";function te(e,t){let r=F(),{id:u=`headlessui-disclosure-button-${r}`,...c}=e,[l,n]=R("Disclosure.Button"),o=X(),a=o===null?!1:o===l.panelId,d=s.useRef(null),p=x(d,t,a?null:l.buttonRef);s.useEffect(()=>{if(!a)return n({type:2,buttonId:u}),()=>{n({type:2,buttonId:null})}},[u,n,a]);let v=S(i=>{var m;if(a){if(l.disclosureState===1)return;switch(i.key){case b.Space:case b.Enter:i.preventDefault(),i.stopPropagation(),n({type:0}),(m=l.buttonRef.current)==null||m.focus();break}}else switch(i.key){case b.Space:case b.Enter:i.preventDefault(),i.stopPropagation(),n({type:0});break}}),I=S(i=>{switch(i.key){case b.Space:i.preventDefault();break}}),P=S(i=>{var m;A(i.currentTarget)||e.disabled||(a?(n({type:0}),(m=l.buttonRef.current)==null||m.focus()):n({type:0}))}),k=s.useMemo(()=>({open:l.disclosureState===0}),[l]),D=W(e,d),f=a?{ref:p,type:D,onKeyDown:v,onClick:P}:{ref:p,id:u,type:D,"aria-expanded":e.disabled?void 0:l.disclosureState===0,"aria-controls":l.linkedPanel?l.panelId:void 0,onKeyDown:v,onKeyUp:I,onClick:P};return T({ourProps:f,theirProps:c,slot:k,defaultTag:ee,name:"Disclosure.Button"})}let ne="div",re=N.RenderStrategy|N.Static;function le(e,t){let r=F(),{id:u=`headlessui-disclosure-panel-${r}`,...c}=e,[l,n]=R("Disclosure.Panel"),{close:o}=L("Disclosure.Panel"),a=x(t,l.panelRef,P=>{q(()=>n({type:P?4:5}))});s.useEffect(()=>(n({type:3,panelId:u}),()=>{n({type:3,panelId:null})}),[u,n]);let d=K(),p=(()=>d!==null?(d&g.Open)===g.Open:l.disclosureState===0)(),v=s.useMemo(()=>({open:l.disclosureState===0,close:o}),[l,o]),I={ref:a,id:u};return y.createElement(w.Provider,{value:l.panelId},T({ourProps:I,theirProps:c,slot:v,defaultTag:ne,features:re,visible:p,name:"Disclosure.Panel"}))}let se=E(J),ue=E(te),oe=E(le),Ie=Object.assign(se,{Button:ue,Panel:oe});export{pe as F,_ as a,ve as u,Ie as v,fe as x};
//# sourceMappingURL=disclosure-bc7b7f17.js.map
