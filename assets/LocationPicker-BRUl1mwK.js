import{j as V}from"./jsx-runtime-Nms4Y4qS.js";import{r as d,R as C}from"./index-BwDkhjyp.js";import{p as ut}from"./index-Dk74W0Oi.js";import{c as pe}from"./_commonjsHelpers-BosuxZz1.js";import{T as Ke,s as Ue,E as ct,F as dt,v as ft,y as pt,n as qe,$ as Ve,c as We,w as gt,d as ht,x as mt,R as vt,f as bt,g as xt,i as ke,t as St,o as j,r as yt,C as It,_ as Ot}from"./portal-CuwZKlIF.js";import{r as Z}from"./index-DxjWwZXO.js";import{o as w,p as Ge,m as wt,M as $e,W as le,b as ie,n as ee,c as Tt,i as ge,H as ue,y as he,D as we,u as Et,V as Rt,a as Ct,A as Mt,s as Pt,f as De}from"./use-server-handoff-complete-BHJL6XQy.js";import{K as _t,b as At,z as kt,d as $t,m as Fe,I as Te,G as Dt,y as Ft,F as zt,u as jt,c as $,r as ze,f as je,a as Lt}from"./XMarkIcon-LncUE2oD.js";import{F as Bt}from"./MagnifyingGlassIcon-CTArdofi.js";function Nt(t,i,n){let[e,o]=d.useState(n),s=t!==void 0,a=d.useRef(s),r=d.useRef(!1),l=d.useRef(!1);return s&&!a.current&&!r.current?(r.current=!0,a.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&a.current&&!l.current&&(l.current=!0,a.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?t:e,w(f=>(s||o(f),i==null?void 0:i(f)))]}function Kt(t){let[i]=d.useState(t);return i}function He(t={},i=null,n=[]){for(let[e,o]of Object.entries(t))Ye(n,Je(i,e),o);return n}function Je(t,i){return t?t+"["+i+"]":i}function Ye(t,i,n){if(Array.isArray(n))for(let[e,o]of n.entries())Ye(t,Je(i,e.toString()),o);else n instanceof Date?t.push([i,n.toISOString()]):typeof n=="boolean"?t.push([i,n?"1":"0"]):typeof n=="string"?t.push([i,n]):typeof n=="number"?t.push([i,`${n}`]):n==null?t.push([i,""]):He(n,i,t)}let Ut=d.createContext(null);function qt({children:t}){let i=d.useContext(Ut);if(!i)return C.createElement(C.Fragment,null,t);let{target:n}=i;return n?Z.createPortal(C.createElement(C.Fragment,null,t),n):null}function Vt({data:t,form:i,disabled:n,onReset:e,overrides:o}){let[s,a]=d.useState(null),r=Ge();return d.useEffect(()=>{if(e&&s)return r.addEventListener(s,"reset",e)},[s,i,e]),C.createElement(qt,null,C.createElement(Wt,{setForm:a,formId:i}),He(t).map(([l,f])=>C.createElement(Ke,{features:Ue.Hidden,...wt({key:l,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,disabled:n,name:l,value:f,...o})})))}function Wt({setForm:t,formId:i}){return d.useEffect(()=>{if(i){let n=document.getElementById(i);n&&t(n)}},[t,i]),i?null:C.createElement(Ke,{features:Ue.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let e=n.closest("form");e&&t(e)}})}function se(t,i,n){let e=n.initialDeps??[],o;return()=>{var s,a,r,l;let f;n.key&&((s=n.debug)!=null&&s.call(n))&&(f=Date.now());const p=t();if(!(p.length!==e.length||p.some((u,y)=>e[y]!==u)))return o;e=p;let x;if(n.key&&((a=n.debug)!=null&&a.call(n))&&(x=Date.now()),o=i(...p),n.key&&((r=n.debug)!=null&&r.call(n))){const u=Math.round((Date.now()-f)*100)/100,y=Math.round((Date.now()-x)*100)/100,b=y/16,g=(O,M)=>{for(O=String(O);O.length<M;)O=" "+O;return O};console.info(`%c⏱ ${g(y,5)} /${g(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(l=n==null?void 0:n.onChange)==null||l.call(n,o),o}}function xe(t,i){if(t===void 0)throw new Error("Unexpected undefined");return t}const Gt=(t,i)=>Math.abs(t-i)<1,Ht=(t,i,n)=>{let e;return function(...o){t.clearTimeout(e),e=t.setTimeout(()=>i.apply(this,o),n)}},Jt=t=>t,Yt=t=>{const i=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),e=[];for(let o=i;o<=n;o++)e.push(o);return e},Qt=(t,i)=>{const n=t.scrollElement;if(!n)return;const e=t.targetWindow;if(!e)return;const o=a=>{const{width:r,height:l}=a;i({width:Math.round(r),height:Math.round(l)})};if(o(n.getBoundingClientRect()),!e.ResizeObserver)return()=>{};const s=new e.ResizeObserver(a=>{const r=a[0];if(r!=null&&r.borderBoxSize){const l=r.borderBoxSize[0];if(l){o({width:l.inlineSize,height:l.blockSize});return}}o(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},Le={passive:!0},Xt=typeof window>"u"?!0:"onscrollend"in window,Zt=(t,i)=>{const n=t.scrollElement;if(!n)return;const e=t.targetWindow;if(!e)return;let o=0;const s=Xt?()=>{}:Ht(e,()=>{i(o,!1)},t.options.isScrollingResetDelay),a=f=>()=>{const{horizontal:p,isRtl:c}=t.options;o=p?n.scrollLeft*(c&&-1||1):n.scrollTop,s(),i(o,f)},r=a(!0),l=a(!1);return l(),n.addEventListener("scroll",r,Le),n.addEventListener("scrollend",l,Le),()=>{n.removeEventListener("scroll",r),n.removeEventListener("scrollend",l)}},en=(t,i,n)=>{if(i!=null&&i.borderBoxSize){const e=i.borderBoxSize[0];if(e)return Math.round(e[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(t.getBoundingClientRect()[n.options.horizontal?"width":"height"])},tn=(t,{adjustments:i=0,behavior:n},e)=>{var o,s;const a=t+i;(s=(o=e.scrollElement)==null?void 0:o.scrollTo)==null||s.call(o,{[e.options.horizontal?"left":"top"]:a,behavior:n})};class nn{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const e=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(o=>{o.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var o;return(o=e())==null?void 0:o.disconnect()},observe:o=>{var s;return(s=e())==null?void 0:s.observe(o,{box:"border-box"})},unobserve:o=>{var s;return(s=e())==null?void 0:s.unobserve(o)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([e,o])=>{typeof o>"u"&&delete n[e]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Jt,rangeExtractor:Yt,onChange:()=>{},measureElement:en,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,...n}},this.notify=(n,e)=>{var o,s;const{startIndex:a,endIndex:r}=this.range??{startIndex:void 0,endIndex:void 0},l=this.calculateRange();(n||a!==(l==null?void 0:l.startIndex)||r!==(l==null?void 0:l.endIndex))&&((s=(o=this.options).onChange)==null||s.call(o,this,e))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const e=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==e){if(this.cleanup(),!e){this.notify(!1,!1);return}this.scrollElement=e,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(o,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o;const a=this.isScrolling;this.isScrolling=s,this.notify(a!==s,s)}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,e)=>{const o=new Map,s=new Map;for(let a=e-1;a>=0;a--){const r=n[a];if(o.has(r.lane))continue;const l=s.get(r.lane);if(l==null||r.end>l.end?s.set(r.lane,r):r.end<l.end&&o.set(r.lane,!0),o.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,r)=>a.end===r.end?a.index-r.index:a.end-r.end)[0]:void 0},this.getMeasurementOptions=se(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,e,o,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:e,scrollMargin:o,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=se(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:e,scrollMargin:o,getItemKey:s,enabled:a},r)=>{var l;if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const f=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const p=this.measurementsCache.slice(0,f);for(let c=f;c<n;c++){let x=(l=this.measurementsCache[c])==null?void 0:l.measureElement;x||(x=E=>{const R=s(c),h=this.elementsCache.get(R);if(!E){h&&(this.observer.unobserve(h),this.elementsCache.delete(R));return}h!==E&&(h&&this.observer.unobserve(h),this.observer.observe(E),this.elementsCache.set(R,E)),E.isConnected&&this.resizeItem(c,this.options.measureElement(E,void 0,this))});const u=s(c),y=this.options.lanes===1?p[c-1]:this.getFurthestMeasurement(p,c),b=y?y.end+this.options.gap:e+o,g=r.get(u),O=typeof g=="number"?g:this.options.estimateSize(c),M=b+O,T=y?y.lane:c%this.options.lanes;p[c]={index:c,start:b,size:O,end:M,key:u,lane:T,measureElement:x}}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=se(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(n,e,o)=>this.range=n.length>0&&e>0?on({measurements:n,outerSize:e,scrollOffset:o}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=se(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,e,o,s)=>e===null?[]:n({startIndex:e.startIndex,endIndex:e.endIndex,overscan:o,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const e=this.options.indexAttribute,o=n.getAttribute(e);return o?parseInt(o,10):(console.warn(`Missing attribute name '${e}={index}' on measured element.`),-1)},this._measureElement=(n,e)=>{const o=this.indexFromElement(n),s=this.getMeasurements()[o];if(!s||!n.isConnected){this.elementsCache.forEach((r,l)=>{r===n&&(this.observer.unobserve(n),this.elementsCache.delete(l))});return}const a=this.elementsCache.get(s.key);a!==n&&(a&&this.observer.unobserve(a),this.observer.observe(n),this.elementsCache.set(s.key,n)),this.resizeItem(o,this.options.measureElement(n,e,this))},this.resizeItem=(n,e)=>{const o=this.getMeasurements()[n];if(!o)return;const s=this.itemSizeCache.get(o.key)??o.size,a=e-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,a,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,e)),this.notify(!0,!1))},this.measureElement=n=>{n&&this._measureElement(n,void 0)},this.getVirtualItems=se(()=>[this.getIndexes(),this.getMeasurements()],(n,e)=>{const o=[];for(let s=0,a=n.length;s<a;s++){const r=n[s],l=e[r];o.push(l)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const e=this.getMeasurements();if(e.length!==0)return xe(e[Qe(0,e.length-1,o=>xe(e[o]).start,n)])},this.getOffsetForAlignment=(n,e)=>{const o=this.getSize(),s=this.getScrollOffset();e==="auto"&&(n<=s?e="start":n>=s+o?e="end":e="start"),e==="start"?n=n:e==="end"?n=n-o:e==="center"&&(n=n-o/2);const a=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[a]:this.scrollElement[a]:0)-o;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,e="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const o=this.getMeasurements()[n];if(!o)return;const s=this.getSize(),a=this.getScrollOffset();if(e==="auto")if(o.end>=a+s-this.options.scrollPaddingEnd)e="end";else if(o.start<=a+this.options.scrollPaddingStart)e="start";else return[a,e];const r=e==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,e),e]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:e="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,e),{adjustments:void 0,behavior:o})},this.scrollToIndex=(n,{align:e="auto",behavior:o}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(n,e);if(!s)return;const[a,r]=s;this._scrollToOffset(a,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[f]=xe(this.getOffsetForIndex(n,r));Gt(f,this.getScrollOffset())||this.scrollToIndex(n,{align:r,behavior:o})}else this.scrollToIndex(n,{align:r,behavior:o})}))},this.scrollBy=(n,{behavior:e}={})=>{this.cancelScrollToIndex(),e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:e})},this.getTotalSize=()=>{var n;const e=this.getMeasurements();let o;return e.length===0?o=this.options.paddingStart:o=this.options.lanes===1?((n=e[e.length-1])==null?void 0:n.end)??0:Math.max(...e.slice(-this.options.lanes).map(s=>s.end)),o-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(n,{adjustments:e,behavior:o})=>{this.options.scrollToFn(n,{behavior:o,adjustments:e},this)},this.measure=()=>{var n,e;this.itemSizeCache=new Map,(e=(n=this.options).onChange)==null||e.call(n,this,!1)},this.setOptions(i)}}const Qe=(t,i,n,e)=>{for(;t<=i;){const o=(t+i)/2|0,s=n(o);if(s<e)t=o+1;else if(s>e)i=o-1;else return o}return t>0?t-1:0};function on({measurements:t,outerSize:i,scrollOffset:n}){const e=t.length-1,s=Qe(0,e,r=>t[r].start,n);let a=s;for(;a<e&&t[a].end<n+i;)a++;return{startIndex:s,endIndex:a}}const rn=typeof document<"u"?d.useLayoutEffect:d.useEffect;function sn(t){const i=d.useReducer(()=>({}),{})[1],n={...t,onChange:(o,s)=>{var a;s?Z.flushSync(i):i(),(a=t.onChange)==null||a.call(t,o,s)}},[e]=d.useState(()=>new nn(n));return e.setOptions(n),d.useEffect(()=>e._didMount(),[]),rn(()=>e._willUpdate()),e}function an(t){return sn({observeElementRect:Qt,observeElementOffset:Zt,scrollToFn:tn,...t})}function ln(t,i){return t!==null&&i!==null&&typeof t=="object"&&typeof i=="object"&&"id"in t&&"id"in i?t.id===i.id:t===i}function un(t=ln){return d.useCallback((i,n)=>{if(typeof t=="string"){let e=t;return(i==null?void 0:i[e])===(n==null?void 0:n[e])}return t(i,n)},[t])}function Xe(t){let i=d.useRef({value:"",selectionStart:null,selectionEnd:null});return ct(t.current,"blur",n=>{let e=n.target;e instanceof HTMLInputElement&&(i.current={value:e.value,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})}),w(()=>{let n=t.current;if(document.activeElement!==n&&n instanceof HTMLInputElement&&n.isConnected){if(n.focus({preventScroll:!0}),n.value!==i.current.value)n.setSelectionRange(n.value.length,n.value.length);else{let{selectionStart:e,selectionEnd:o}=i.current;e!==null&&o!==null&&n.setSelectionRange(e,o)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function cn({children:t,freeze:i}){let n=Ie(i,t);return C.createElement(C.Fragment,null,n)}function Ie(t,i){let[n,e]=d.useState(i);return!t&&n!==i&&e(i),t?n:i}var Ee=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(Ee||{}),dn={},fn=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(fn||{}),pn=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(pn||{}),gn=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(gn||{}),hn=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.SetActivationTrigger=6]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",t))(hn||{});function Se(t,i=n=>n){let n=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,e=i(t.options.slice()),o=e.length>0&&e[0].dataRef.current.order!==null?e.sort((a,r)=>a.dataRef.current.order-r.dataRef.current.order):Ot(e,a=>a.dataRef.current.domRef.current),s=n?o.indexOf(n):null;return s===-1&&(s=null),{options:o,activeOptionIndex:s}}let mn={1(t){var i;return(i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===1?t:{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(t){var i,n;if((i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===0)return t;if((n=t.dataRef.current)!=null&&n.value){let e=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(e!==-1)return{...t,activeOptionIndex:e,comboboxState:0,__demoMode:!1}}return{...t,comboboxState:0,__demoMode:!1}},3(t,i){return t.isTyping===i.isTyping?t:{...t,isTyping:i.isTyping}},2(t,i){var n,e,o,s,a;if((n=t.dataRef.current)!=null&&n.disabled||(e=t.dataRef.current)!=null&&e.optionsRef.current&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:p,disabled:c}=t.virtual,x=i.focus===$.Specific?i.idx:je(i,{resolveItems:()=>p,resolveActiveIndex:()=>{var y,b;return(b=(y=t.activeOptionIndex)!=null?y:p.findIndex(g=>!c(g)))!=null?b:null},resolveDisabled:c,resolveId(){throw new Error("Function not implemented.")}}),u=(s=i.trigger)!=null?s:2;return t.activeOptionIndex===x&&t.activationTrigger===u?t:{...t,activeOptionIndex:x,activationTrigger:u,isTyping:!1,__demoMode:!1}}let r=Se(t);if(r.activeOptionIndex===null){let p=r.options.findIndex(c=>!c.dataRef.current.disabled);p!==-1&&(r.activeOptionIndex=p)}let l=i.focus===$.Specific?i.idx:je(i,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled}),f=(a=i.trigger)!=null?a:2;return t.activeOptionIndex===l&&t.activationTrigger===f?t:{...t,...r,isTyping:!1,activeOptionIndex:l,activationTrigger:f,__demoMode:!1}},4:(t,i)=>{var n,e,o;if((n=t.dataRef.current)!=null&&n.virtual)return{...t,options:[...t.options,i.payload]};let s=i.payload,a=Se(t,l=>(l.push(s),l));t.activeOptionIndex===null&&(e=t.dataRef.current)!=null&&e.isSelected(i.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(s));let r={...t,...a,activationTrigger:2};return(o=t.dataRef.current)!=null&&o.__demoMode&&t.dataRef.current.value===void 0&&(r.activeOptionIndex=0),r},5:(t,i)=>{var n;if((n=t.dataRef.current)!=null&&n.virtual)return{...t,options:t.options.filter(o=>o.id!==i.id)};let e=Se(t,o=>{let s=o.findIndex(a=>a.id===i.id);return s!==-1&&o.splice(s,1),o});return{...t,...e,activationTrigger:2}},6:(t,i)=>t.activationTrigger===i.trigger?t:{...t,activationTrigger:i.trigger},7:(t,i)=>{var n,e;if(t.virtual===null)return{...t,virtual:{options:i.options,disabled:(n=i.disabled)!=null?n:()=>!1}};if(t.virtual.options===i.options&&t.virtual.disabled===i.disabled)return t;let o=t.activeOptionIndex;if(t.activeOptionIndex!==null){let s=i.options.indexOf(t.virtual.options[t.activeOptionIndex]);s!==-1?o=s:o=null}return{...t,activeOptionIndex:o,virtual:{options:i.options,disabled:(e=i.disabled)!=null?e:()=>!1}}}},Re=d.createContext(null);Re.displayName="ComboboxActionsContext";function ce(t){let i=d.useContext(Re);if(i===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ce),n}return i}let Ze=d.createContext(null);function vn(t){let i=re("VirtualProvider"),{options:n}=i.virtual,[e,o]=d.useMemo(()=>{let f=i.optionsRef.current;if(!f)return[0,0];let p=window.getComputedStyle(f);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[i.optionsRef.current]),s=an({enabled:n.length!==0,scrollPaddingStart:e,scrollPaddingEnd:o,count:n.length,estimateSize(){return 40},getScrollElement(){var f;return(f=i.optionsRef.current)!=null?f:null},overscan:12}),[a,r]=d.useState(0);ee(()=>{r(f=>f+1)},[n]);let l=s.getVirtualItems();return l.length===0?null:C.createElement(Ze.Provider,{value:s},C.createElement("div",{style:{position:"relative",width:"100%",height:`${s.getTotalSize()}px`},ref:f=>{if(f){if(typeof process<"u"&&dn.JEST_WORKER_ID!==void 0||i.activationTrigger===0)return;i.activeOptionIndex!==null&&n.length>i.activeOptionIndex&&s.scrollToIndex(i.activeOptionIndex)}}},l.map(f=>{var p;return C.createElement(d.Fragment,{key:f.key},C.cloneElement((p=t.children)==null?void 0:p.call(t,{...t.slot,option:n[f.index]}),{key:`${a}-${f.key}`,"data-index":f.index,"aria-setsize":n.length,"aria-posinset":f.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${f.start}px)`,overflowAnchor:"none"}}))})))}let ae=d.createContext(null);ae.displayName="ComboboxDataContext";function re(t){let i=d.useContext(ae);if(i===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,re),n}return i}function bn(t,i){return ie(i.type,mn,t,i)}let xn=d.Fragment;function Sn(t,i){var n,e;let o=At(),{value:s,defaultValue:a,onChange:r,form:l,name:f,by:p,disabled:c=o||!1,onClose:x,__demoMode:u=!1,multiple:y=!1,immediate:b=!1,virtual:g=null,nullable:O,...M}=t,T=Kt(a),[E=y?[]:void 0,R]=Nt(s,r,T),[h,v]=d.useReducer(bn,{dataRef:d.createRef(),comboboxState:u?0:1,isTyping:!1,options:[],virtual:g?{options:g.options,disabled:(n=g.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,__demoMode:u}),D=d.useRef(!1),L=d.useRef({static:!1,hold:!1}),Y=d.useRef(null),W=d.useRef(null),Q=d.useRef(null),B=un(p),_=w(I=>g?p===null?g.options.indexOf(I):g.options.findIndex(P=>B(P,I)):h.options.findIndex(P=>B(P.dataRef.current.value,I))),N=d.useCallback(I=>ie(S.mode,{1:()=>E.some(P=>B(P,I)),0:()=>B(E,I)}),[E]),X=w(I=>h.activeOptionIndex===_(I)),S=d.useMemo(()=>({...h,immediate:b,optionsPropsRef:L,inputRef:Y,buttonRef:W,optionsRef:Q,value:E,defaultValue:T,disabled:c,mode:y?1:0,virtual:g?h.virtual:null,get activeOptionIndex(){if(D.current&&h.activeOptionIndex===null&&(g?g.options.length>0:h.options.length>0)){if(g){let P=g.options.findIndex(H=>{var fe,Ae;return!((Ae=(fe=g.disabled)==null?void 0:fe.call(g,H))!=null&&Ae)});if(P!==-1)return P}let I=h.options.findIndex(P=>!P.dataRef.current.disabled);if(I!==-1)return I}return h.activeOptionIndex},calculateIndex:_,compare:B,isSelected:N,isActive:X}),[E,T,c,y,u,h,g]);ee(()=>{var I;g&&v({type:7,options:g.options,disabled:(I=g.disabled)!=null?I:null})},[g,g==null?void 0:g.options,g==null?void 0:g.disabled]),ee(()=>{h.dataRef.current=S},[S]);let ne=S.comboboxState===0;dt(ne,[S.buttonRef,S.inputRef,S.optionsRef],()=>G.closeCombobox());let z=d.useMemo(()=>{var I,P,H;return{open:S.comboboxState===0,disabled:c,activeIndex:S.activeOptionIndex,activeOption:S.activeOptionIndex===null?null:S.virtual?S.virtual.options[(I=S.activeOptionIndex)!=null?I:0]:(H=(P=S.options[S.activeOptionIndex])==null?void 0:P.dataRef.current.value)!=null?H:null,value:E}},[S,c,E]),ve=w(()=>{if(S.activeOptionIndex!==null){if(G.setIsTyping(!1),S.virtual)A(S.virtual.options[S.activeOptionIndex]);else{let{dataRef:I}=S.options[S.activeOptionIndex];A(I.current.value)}G.goToOption($.Specific,S.activeOptionIndex)}}),be=w(()=>{v({type:0}),D.current=!0}),m=w(()=>{v({type:1}),D.current=!1,x==null||x()}),U=w(I=>{v({type:3,isTyping:I})}),F=w((I,P,H)=>(D.current=!1,I===$.Specific?v({type:2,focus:$.Specific,idx:P,trigger:H}):v({type:2,focus:I,trigger:H}))),q=w((I,P)=>(v({type:4,payload:{id:I,dataRef:P}}),()=>{S.isActive(P.current.value)&&(D.current=!0),v({type:5,id:I})})),A=w(I=>ie(S.mode,{0(){return R==null?void 0:R(I)},1(){let P=S.value.slice(),H=P.findIndex(fe=>B(fe,I));return H===-1?P.push(I):P.splice(H,1),R==null?void 0:R(P)}})),K=w(I=>{v({type:6,trigger:I})}),G=d.useMemo(()=>({onChange:A,registerOption:q,goToOption:F,setIsTyping:U,closeCombobox:m,openCombobox:be,setActivationTrigger:K,selectActiveOption:ve}),[]),[rt,st]=kt(),at=i===null?{}:{ref:i},lt=d.useCallback(()=>{if(T!==void 0)return R==null?void 0:R(T)},[R,T]);return C.createElement(st,{value:rt,props:{htmlFor:(e=S.inputRef.current)==null?void 0:e.id},slot:{open:S.comboboxState===0,disabled:c}},C.createElement(ft,null,C.createElement(Re.Provider,{value:G},C.createElement(ae.Provider,{value:S},C.createElement(Tt,{value:ie(S.comboboxState,{0:ge.Open,1:ge.Closed})},f!=null&&C.createElement(Vt,{disabled:c,data:E!=null?{[f]:E}:{},form:l,onReset:lt}),ue({ourProps:at,theirProps:M,slot:z,defaultTag:xn,name:"Combobox"}))))))}let yn="input";function In(t,i){var n,e,o,s,a;let r=re("Combobox.Input"),l=ce("Combobox.Input"),f=d.useId(),p=$t(),{id:c=p||`headlessui-combobox-input-${f}`,onChange:x,displayValue:u,disabled:y=r.disabled||!1,autoFocus:b=!1,type:g="text",...O}=t,M=he(r.inputRef,i,pt()),T=qe(r.inputRef),E=Ge(),R=w(()=>{l.onChange(null),r.optionsRef.current&&(r.optionsRef.current.scrollTop=0),l.goToOption($.Nothing)}),h=d.useMemo(()=>{var m;return typeof u=="function"&&r.value!==void 0?(m=u(r.value))!=null?m:"":typeof r.value=="string"?r.value:""},[r.value,u]);Fe(([m,U],[F,q])=>{if(r.isTyping)return;let A=r.inputRef.current;A&&((q===0&&U===1||m!==F)&&(A.value=m),requestAnimationFrame(()=>{if(r.isTyping||!A||(T==null?void 0:T.activeElement)!==A)return;let{selectionStart:K,selectionEnd:G}=A;Math.abs((G??0)-(K??0))===0&&K===0&&A.setSelectionRange(A.value.length,A.value.length)}))},[h,r.comboboxState,T,r.isTyping]),Fe(([m],[U])=>{if(m===0&&U===1){if(r.isTyping)return;let F=r.inputRef.current;if(!F)return;let q=F.value,{selectionStart:A,selectionEnd:K,selectionDirection:G}=F;F.value="",F.value=q,G!==null?F.setSelectionRange(A,K,G):F.setSelectionRange(A,K)}},[r.comboboxState]);let v=d.useRef(!1),D=w(()=>{v.current=!0}),L=w(()=>{E.nextFrame(()=>{v.current=!1})}),Y=w(m=>{switch(l.setIsTyping(!0),m.key){case j.Enter:if(r.comboboxState!==0||v.current)return;if(m.preventDefault(),m.stopPropagation(),r.activeOptionIndex===null){l.closeCombobox();return}l.selectActiveOption(),r.mode===0&&l.closeCombobox();break;case j.ArrowDown:return m.preventDefault(),m.stopPropagation(),ie(r.comboboxState,{0:()=>l.goToOption($.Next),1:()=>l.openCombobox()});case j.ArrowUp:return m.preventDefault(),m.stopPropagation(),ie(r.comboboxState,{0:()=>l.goToOption($.Previous),1:()=>{Z.flushSync(()=>l.openCombobox()),r.value||l.goToOption($.Last)}});case j.Home:if(m.shiftKey)break;return m.preventDefault(),m.stopPropagation(),l.goToOption($.First);case j.PageUp:return m.preventDefault(),m.stopPropagation(),l.goToOption($.First);case j.End:if(m.shiftKey)break;return m.preventDefault(),m.stopPropagation(),l.goToOption($.Last);case j.PageDown:return m.preventDefault(),m.stopPropagation(),l.goToOption($.Last);case j.Escape:return r.comboboxState!==0?void 0:(m.preventDefault(),r.optionsRef.current&&!r.optionsPropsRef.current.static&&m.stopPropagation(),r.mode===0&&r.value===null&&R(),l.closeCombobox());case j.Tab:if(r.comboboxState!==0)return;r.mode===0&&r.activationTrigger!==1&&l.selectActiveOption(),l.closeCombobox();break}}),W=w(m=>{x==null||x(m),r.mode===0&&m.target.value===""&&R(),l.openCombobox()}),Q=w(m=>{var U,F,q;let A=(U=m.relatedTarget)!=null?U:ze.find(K=>K!==m.currentTarget);if(!((F=r.optionsRef.current)!=null&&F.contains(A))&&!((q=r.buttonRef.current)!=null&&q.contains(A))&&r.comboboxState===0)return m.preventDefault(),r.mode===0&&r.value===null&&R(),l.closeCombobox()}),B=w(m=>{var U,F,q;let A=(U=m.relatedTarget)!=null?U:ze.find(K=>K!==m.currentTarget);(F=r.buttonRef.current)!=null&&F.contains(A)||(q=r.optionsRef.current)!=null&&q.contains(A)||r.disabled||r.immediate&&r.comboboxState!==0&&E.microTask(()=>{Z.flushSync(()=>l.openCombobox()),l.setActivationTrigger(1)})}),_=Te(),N=Dt(),{isFocused:X,focusProps:S}=Ve({autoFocus:b}),{isHovered:ne,hoverProps:z}=We({isDisabled:y}),ve=d.useMemo(()=>({open:r.comboboxState===0,disabled:y,hover:ne,focus:X,autofocus:b}),[r,ne,X,b,y]),be=we({ref:M,id:c,role:"combobox",type:g,"aria-controls":(n=r.optionsRef.current)==null?void 0:n.id,"aria-expanded":r.comboboxState===0,"aria-activedescendant":r.activeOptionIndex===null?void 0:r.virtual?(e=r.options.find(m=>!m.dataRef.current.disabled&&r.compare(m.dataRef.current.value,r.virtual.options[r.activeOptionIndex])))==null?void 0:e.id:(o=r.options[r.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":_,"aria-describedby":N,"aria-autocomplete":"list",defaultValue:(a=(s=t.defaultValue)!=null?s:r.defaultValue!==void 0?u==null?void 0:u(r.defaultValue):null)!=null?a:r.defaultValue,disabled:y||void 0,autoFocus:b,onCompositionStart:D,onCompositionEnd:L,onKeyDown:Y,onChange:W,onFocus:B,onBlur:Q},S,z);return ue({ourProps:be,theirProps:O,slot:ve,defaultTag:yn,name:"Combobox.Input"})}let On="button";function wn(t,i){var n;let e=re("Combobox.Button"),o=ce("Combobox.Button"),s=he(e.buttonRef,i),a=d.useId(),{id:r=`headlessui-combobox-button-${a}`,disabled:l=e.disabled||!1,autoFocus:f=!1,...p}=t,c=Xe(e.inputRef),x=w(v=>{switch(v.key){case j.Space:case j.Enter:v.preventDefault(),v.stopPropagation(),e.comboboxState===1&&Z.flushSync(()=>o.openCombobox()),c();return;case j.ArrowDown:v.preventDefault(),v.stopPropagation(),e.comboboxState===1&&(Z.flushSync(()=>o.openCombobox()),e.value||o.goToOption($.First)),c();return;case j.ArrowUp:v.preventDefault(),v.stopPropagation(),e.comboboxState===1&&(Z.flushSync(()=>o.openCombobox()),e.value||o.goToOption($.Last)),c();return;case j.Escape:if(e.comboboxState!==0)return;v.preventDefault(),e.optionsRef.current&&!e.optionsPropsRef.current.static&&v.stopPropagation(),Z.flushSync(()=>o.closeCombobox()),c();return;default:return}}),u=w(v=>{v.preventDefault(),!yt(v.currentTarget)&&(v.button===Ee.Left&&(e.comboboxState===0?o.closeCombobox():o.openCombobox()),c())}),y=Te([r]),{isFocusVisible:b,focusProps:g}=Ve({autoFocus:f}),{isHovered:O,hoverProps:M}=We({isDisabled:l}),{pressed:T,pressProps:E}=gt({disabled:l}),R=d.useMemo(()=>({open:e.comboboxState===0,active:T||e.comboboxState===0,disabled:l,value:e.value,hover:O,focus:b}),[e,O,b,T,l]),h=we({ref:s,id:r,type:ht(t,e.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(n=e.optionsRef.current)==null?void 0:n.id,"aria-expanded":e.comboboxState===0,"aria-labelledby":y,disabled:l||void 0,autoFocus:f,onMouseDown:u,onKeyDown:x},g,M,E);return ue({ourProps:h,theirProps:p,slot:R,defaultTag:On,name:"Combobox.Button"})}let Tn="div",En=$e.RenderStrategy|$e.Static;function Rn(t,i){var n,e,o;let s=d.useId(),{id:a=`headlessui-combobox-options-${s}`,hold:r=!1,anchor:l,portal:f=!1,modal:p=!0,transition:c=!1,...x}=t,u=re("Combobox.Options"),y=ce("Combobox.Options"),b=mt(l);b&&(f=!0);let[g,O]=vt(b),M=bt(),T=he(u.optionsRef,i,b?g:null),E=qe(u.optionsRef),R=Et(),[h,v]=Rt(c,u.optionsRef,R!==null?(R&ge.Open)===ge.Open:u.comboboxState===0);Ct(h,u.inputRef,y.closeCombobox);let D=u.__demoMode?!1:p&&u.comboboxState===0;xt(D,E);let L=u.__demoMode?!1:p&&u.comboboxState===0;Ft(L,{allowed:w(()=>[u.inputRef.current,u.buttonRef.current,u.optionsRef.current])}),ee(()=>{var z;u.optionsPropsRef.current.static=(z=t.static)!=null?z:!1},[u.optionsPropsRef,t.static]),ee(()=>{u.optionsPropsRef.current.hold=r},[u.optionsPropsRef,r]),zt(u.comboboxState===0,{container:u.optionsRef.current,accept(z){return z.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:z.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(z){z.setAttribute("role","none")}});let Y=Te([(n=u.buttonRef.current)==null?void 0:n.id]),W=d.useMemo(()=>({open:u.comboboxState===0,option:void 0}),[u.comboboxState]),Q=w(()=>{y.setActivationTrigger(0)}),B=w(z=>{z.preventDefault(),y.setActivationTrigger(0)}),_=we(b?M():{},{"aria-labelledby":Y,role:"listbox","aria-multiselectable":u.mode===1?!0:void 0,id:a,ref:T,style:{...x.style,...O,"--input-width":ke(u.inputRef,!0).width,"--button-width":ke(u.buttonRef,!0).width},onWheel:u.activationTrigger===0?void 0:Q,onMouseDown:B,...Mt(v)}),N=h&&u.comboboxState===1,X=Ie(N,(e=u.virtual)==null?void 0:e.options),S=Ie(N,u.value),ne=w(z=>u.compare(S,z));if(u.virtual){if(X===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(x,{children:C.createElement(ae.Provider,{value:X!==u.virtual.options?{...u,virtual:{...u.virtual,options:X}}:u},C.createElement(vn,{slot:W},x.children))})}return C.createElement(St,{enabled:f?t.static||h:!1},C.createElement(ae.Provider,{value:u.mode===1?u:{...u,isSelected:ne}},ue({ourProps:_,theirProps:{...x,children:C.createElement(cn,{freeze:N},typeof x.children=="function"?(o=x.children)==null?void 0:o.call(x,W):x.children)},slot:W,defaultTag:Tn,features:En,visible:h,name:"Combobox.Options"})))}let Cn="div";function Mn(t,i){var n,e,o,s;let a=re("Combobox.Option"),r=ce("Combobox.Option"),l=d.useId(),{id:f=`headlessui-combobox-option-${l}`,value:p,disabled:c=(o=(e=(n=a.virtual)==null?void 0:n.disabled)==null?void 0:e.call(n,p))!=null?o:!1,order:x=null,...u}=t,y=Xe(a.inputRef),b=a.virtual?a.activeOptionIndex===a.calculateIndex(p):a.activeOptionIndex===null?!1:((s=a.options[a.activeOptionIndex])==null?void 0:s.id)===f,g=a.isSelected(p),O=d.useRef(null),M=Pt({disabled:c,value:p,domRef:O,order:x}),T=d.useContext(Ze),E=he(i,O,T?T.measureElement:null),R=w(()=>{r.setIsTyping(!1),r.onChange(p)});ee(()=>r.registerOption(f,M),[M,f]);let h=d.useRef(!(a.virtual||a.__demoMode));ee(()=>{if(!a.virtual&&!a.__demoMode)return De().requestAnimationFrame(()=>{h.current=!0})},[a.virtual,a.__demoMode]),ee(()=>{if(h.current&&a.comboboxState===0&&b&&a.activationTrigger!==0)return De().requestAnimationFrame(()=>{var _,N;(N=(_=O.current)==null?void 0:_.scrollIntoView)==null||N.call(_,{block:"nearest"})})},[O,b,a.comboboxState,a.activationTrigger,a.activeOptionIndex]);let v=w(_=>{_.preventDefault(),_.button===Ee.Left&&(c||(R(),It()||requestAnimationFrame(()=>y()),a.mode===0&&r.closeCombobox()))}),D=w(()=>{if(c)return r.goToOption($.Nothing);let _=a.calculateIndex(p);r.goToOption($.Specific,_)}),L=jt(),Y=w(_=>L.update(_)),W=w(_=>{if(!L.wasMoved(_)||c||b)return;let N=a.calculateIndex(p);r.goToOption($.Specific,N,0)}),Q=w(_=>{L.wasMoved(_)&&(c||b&&(a.optionsPropsRef.current.hold||r.goToOption($.Nothing)))}),B=d.useMemo(()=>({active:b,focus:b,selected:g,disabled:c}),[b,g,c]);return ue({ourProps:{id:f,ref:E,role:"option",tabIndex:c===!0?void 0:-1,"aria-disabled":c===!0?!0:void 0,"aria-selected":g,disabled:void 0,onMouseDown:v,onFocus:D,onPointerEnter:Y,onMouseEnter:Y,onPointerMove:W,onMouseMove:W,onPointerLeave:Q,onMouseLeave:Q},theirProps:u,slot:B,defaultTag:Cn,name:"Combobox.Option"})}let Pn=le(Sn),_n=le(wn),et=le(In),An=_t,tt=le(Rn),nt=le(Mn),kn=Object.assign(Pn,{Input:et,Button:_n,Label:An,Options:tt,Option:nt});var te={},Ce={},$n="Expected a function",Be=NaN,Dn="[object Symbol]",Fn=/^\s+|\s+$/g,zn=/^[-+]0x[0-9a-f]+$/i,jn=/^0b[01]+$/i,Ln=/^0o[0-7]+$/i,Bn=parseInt,Nn=typeof pe=="object"&&pe&&pe.Object===Object&&pe,Kn=typeof self=="object"&&self&&self.Object===Object&&self,Un=Nn||Kn||Function("return this")(),qn=Object.prototype,Vn=qn.toString,Wn=Math.max,Gn=Math.min,ye=function(){return Un.Date.now()};function Hn(t,i,n){var e,o,s,a,r,l,f=0,p=!1,c=!1,x=!0;if(typeof t!="function")throw new TypeError($n);i=Ne(i)||0,Oe(n)&&(p=!!n.leading,c="maxWait"in n,s=c?Wn(Ne(n.maxWait)||0,i):s,x="trailing"in n?!!n.trailing:x);function u(h){var v=e,D=o;return e=o=void 0,f=h,a=t.apply(D,v),a}function y(h){return f=h,r=setTimeout(O,i),p?u(h):a}function b(h){var v=h-l,D=h-f,L=i-v;return c?Gn(L,s-D):L}function g(h){var v=h-l,D=h-f;return l===void 0||v>=i||v<0||c&&D>=s}function O(){var h=ye();if(g(h))return M(h);r=setTimeout(O,b(h))}function M(h){return r=void 0,x&&e?u(h):(e=o=void 0,a)}function T(){r!==void 0&&clearTimeout(r),f=0,e=l=o=r=void 0}function E(){return r===void 0?a:M(ye())}function R(){var h=ye(),v=g(h);if(e=arguments,o=this,l=h,v){if(r===void 0)return y(l);if(c)return r=setTimeout(O,i),u(l)}return r===void 0&&(r=setTimeout(O,i)),a}return R.cancel=T,R.flush=E,R}function Oe(t){var i=typeof t;return!!t&&(i=="object"||i=="function")}function Jn(t){return!!t&&typeof t=="object"}function Yn(t){return typeof t=="symbol"||Jn(t)&&Vn.call(t)==Dn}function Ne(t){if(typeof t=="number")return t;if(Yn(t))return Be;if(Oe(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Oe(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=t.replace(Fn,"");var n=jn.test(t);return n||Ln.test(t)?Bn(t.slice(2),n?2:8):zn.test(t)?Be:+t}var Qn=Hn,me={};Object.defineProperty(me,"__esModule",{value:!0});me.compose=function(){for(var i=arguments.length,n=Array(i),e=0;e<i;e++)n[e]=arguments[e];return function(){for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];n.forEach(function(r){return r&&r.apply(void 0,s)})}};me.pick=function(i){for(var n=arguments.length,e=Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];return e.reduce(function(s,a){return i&&i.hasOwnProperty(a)&&(s[a]=i[a]),s},{})};Object.defineProperty(Ce,"__esModule",{value:!0});var oe=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},Xn=function(){function t(i,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),Zn=d,eo=Me(Zn),to=ut,k=Me(to),no=Qn,oo=Me(no),J=me;function Me(t){return t&&t.__esModule?t:{default:t}}function io(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function ro(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:t}function so(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}var ao=function(i){return{mainText:i.main_text,secondaryText:i.secondary_text}},Pe=function(t){so(i,t);function i(n){io(this,i);var e=ro(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n));return e.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");e.autocompleteService=new window.google.maps.places.AutocompleteService,e.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,e.setState(function(o){return o.ready?null:{ready:!0}})},e.autocompleteCallback=function(o,s){if(e.setState({loading:!1}),s!==e.autocompleteOK){e.props.onError(s,e.clearSuggestions);return}var a=e.props.highlightFirstSuggestion;e.setState({suggestions:o.map(function(r,l){return{id:r.id,description:r.description,placeId:r.place_id,active:!!(a&&l===0),index:l,formattedSuggestion:ao(r.structured_formatting),matchedSubstrings:r.matched_substrings,terms:r.terms,types:r.types}})})},e.fetchPredictions=function(){var o=e.props.value;o.length&&(e.setState({loading:!0}),e.autocompleteService.getPlacePredictions(oe({},e.props.searchOptions,{input:o}),e.autocompleteCallback))},e.clearSuggestions=function(){e.setState({suggestions:[]})},e.clearActive=function(){e.setState({suggestions:e.state.suggestions.map(function(o){return oe({},o,{active:!1})})})},e.handleSelect=function(o,s,a){e.clearSuggestions(),e.props.onSelect?e.props.onSelect(o,s,a):e.props.onChange(o)},e.getActiveSuggestion=function(){return e.state.suggestions.find(function(o){return o.active})},e.selectActiveAtIndex=function(o){var s=e.state.suggestions.find(function(a){return a.index===o}).description;e.setActiveAtIndex(o),e.props.onChange(s)},e.selectUserInputValue=function(){e.clearActive(),e.props.onChange(e.state.userInputValue)},e.handleEnterKey=function(){var o=e.getActiveSuggestion();o===void 0?e.handleSelect(e.props.value,null,null):e.handleSelect(o.description,o.placeId,o)},e.handleDownKey=function(){if(e.state.suggestions.length!==0){var o=e.getActiveSuggestion();o===void 0?e.selectActiveAtIndex(0):o.index===e.state.suggestions.length-1?e.selectUserInputValue():e.selectActiveAtIndex(o.index+1)}},e.handleUpKey=function(){if(e.state.suggestions.length!==0){var o=e.getActiveSuggestion();o===void 0?e.selectActiveAtIndex(e.state.suggestions.length-1):o.index===0?e.selectUserInputValue():e.selectActiveAtIndex(o.index-1)}},e.handleInputKeyDown=function(o){switch(o.key){case"Enter":o.preventDefault(),e.handleEnterKey();break;case"ArrowDown":o.preventDefault(),e.handleDownKey();break;case"ArrowUp":o.preventDefault(),e.handleUpKey();break;case"Escape":e.clearSuggestions();break}},e.setActiveAtIndex=function(o){e.setState({suggestions:e.state.suggestions.map(function(s,a){return a===o?oe({},s,{active:!0}):oe({},s,{active:!1})})})},e.handleInputChange=function(o){var s=o.target.value;if(e.props.onChange(s),e.setState({userInputValue:s}),!s){e.clearSuggestions();return}e.props.shouldFetchSuggestions&&e.debouncedFetchPredictions()},e.handleInputOnBlur=function(){e.mousedownOnSuggestion||e.clearSuggestions()},e.getActiveSuggestionId=function(){var o=e.getActiveSuggestion();return o?"PlacesAutocomplete__suggestion-"+o.placeId:void 0},e.getIsExpanded=function(){return e.state.suggestions.length>0},e.getInputProps=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(o.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(o.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var s={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":e.getIsExpanded(),"aria-activedescendant":e.getActiveSuggestionId(),disabled:!e.state.ready};return oe({},s,o,{onKeyDown:(0,J.compose)(e.handleInputKeyDown,o.onKeyDown),onBlur:(0,J.compose)(e.handleInputOnBlur,o.onBlur),value:e.props.value,onChange:function(r){e.handleInputChange(r)}})},e.getSuggestionItemProps=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.handleSuggestionMouseEnter.bind(e,o.index),r=e.handleSuggestionClick.bind(e,o);return oe({},s,{key:o.id,id:e.getActiveSuggestionId(),role:"option",onMouseEnter:(0,J.compose)(a,s.onMouseEnter),onMouseLeave:(0,J.compose)(e.handleSuggestionMouseLeave,s.onMouseLeave),onMouseDown:(0,J.compose)(e.handleSuggestionMouseDown,s.onMouseDown),onMouseUp:(0,J.compose)(e.handleSuggestionMouseUp,s.onMouseUp),onTouchStart:(0,J.compose)(e.handleSuggestionTouchStart,s.onTouchStart),onTouchEnd:(0,J.compose)(e.handleSuggestionMouseUp,s.onTouchEnd),onClick:(0,J.compose)(r,s.onClick)})},e.handleSuggestionMouseEnter=function(o){e.setActiveAtIndex(o)},e.handleSuggestionMouseLeave=function(){e.mousedownOnSuggestion=!1,e.clearActive()},e.handleSuggestionMouseDown=function(o){o.preventDefault(),e.mousedownOnSuggestion=!0},e.handleSuggestionTouchStart=function(){e.mousedownOnSuggestion=!0},e.handleSuggestionMouseUp=function(){e.mousedownOnSuggestion=!1},e.handleSuggestionClick=function(o,s){s&&s.preventDefault&&s.preventDefault();var a=o.description,r=o.placeId;e.handleSelect(a,r,o),setTimeout(function(){e.mousedownOnSuggestion=!1})},e.state={loading:!1,suggestions:[],userInputValue:n.value,ready:!n.googleCallbackName},e.debouncedFetchPredictions=(0,oo.default)(e.fetchPredictions,n.debounce),e}return Xn(i,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;if(e){var o=window.google&&window.google.maps&&window.google.maps.places;o?this.init():window[e]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),i}(eo.default.Component);Pe.propTypes={onChange:k.default.func.isRequired,value:k.default.string.isRequired,children:k.default.func.isRequired,onError:k.default.func,onSelect:k.default.func,searchOptions:k.default.shape({bounds:k.default.object,componentRestrictions:k.default.object,location:k.default.object,offset:k.default.oneOfType([k.default.number,k.default.string]),radius:k.default.oneOfType([k.default.number,k.default.string]),types:k.default.array}),debounce:k.default.number,highlightFirstSuggestion:k.default.bool,shouldFetchSuggestions:k.default.bool,googleCallbackName:k.default.string};Pe.defaultProps={onError:function(i,n){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,i)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};Ce.default=Pe;var de={};Object.defineProperty(de,"__esModule",{value:!0});de.geocodeByAddress=function(i){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,s){n.geocode({address:i},function(a,r){r!==e&&s(r),o(a)})})};de.getLatLng=function(i){return new Promise(function(n,e){try{var o={lat:i.geometry.location.lat(),lng:i.geometry.location.lng()};n(o)}catch(s){e(s)}})};de.geocodeByPlaceId=function(i){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,s){n.geocode({placeId:i},function(a,r){r!==e&&s(r),o(a)})})};Object.defineProperty(te,"__esModule",{value:!0});var ot=te.getLatLng=te.geocodeByPlaceId=it=te.geocodeByAddress=void 0,lo=Ce,uo=co(lo),_e=de;function co(t){return t&&t.__esModule?t:{default:t}}var it=te.geocodeByAddress=_e.geocodeByAddress;te.geocodeByPlaceId=_e.geocodeByPlaceId;ot=te.getLatLng=_e.getLatLng;var fo=te.default=uo.default;const po=({posCallback:t,centerCallback:i,singleMarker:n,singleMarkerCallback:e,eventAddress:o,eventLatitude:s,eventLongitude:a})=>{const[r,l]=d.useState(o||""),[f,p]=d.useState({lat:45.3850225,lng:-75.6946679}),[c,x]=d.useState([]),[u,y]=d.useState({lat:s||45.3850225,lng:a||-75.6946679}),b=async g=>{const O=await it(g),M=await ot(O[0]),T=O[0].place_id;l(g),p({lat:M.lat,lng:M.lng}),x([...c,{name:g,id:T,position:M}]),y(M)};return d.useEffect(()=>{t&&t(c)},[c,t]),d.useEffect(()=>{i&&i(f)},[f,i]),d.useEffect(()=>{n&&e&&e({coordinates:u,address:r})},[u,e,n]),V.jsx("div",{className:"cu-locationpicker not-prose",children:V.jsx(fo,{value:r,onChange:l,onSelect:b,children:({getInputProps:g,suggestions:O,getSuggestionItemProps:M})=>V.jsxs(kn,{value:r,onChange:b,children:[V.jsxs("div",{className:"relative",children:[V.jsx(Bt,{className:"pointer-events-none absolute left-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true"}),V.jsx(et,{className:"w-full h-12 pl-10 pr-4 bg-white border rounded-lg border-cu-black-200 text-cu-black-800 placeholder-cu-black-400 focus:border-cu-black-400 focus:outline-none focus:ring-0 sm:text-sm",...g({placeholder:"Type address"})}),r&&V.jsx(Lt,{className:"absolute right-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true",onClick:()=>{l("")}})]}),V.jsx(tt,{className:"mt-3 max-h-80 divide-y divide-cu-black-100 overflow-y-auto bg-white px-1.5 text-sm text-cu-black-800",children:O.map(T=>V.jsx(nt,{value:T,children:({active:E})=>V.jsx("ul",{children:V.jsx("li",{...M(T),className:`p-4 text-cu-black-600 hover:cursor-pointer ${E?"bg-cu-black-50 text-cu-black-900":"bg-white"}`,children:T.description})})},T.index))})]})})})};po.__docgenInfo={description:"",methods:[],displayName:"LocationPicker",props:{posCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(pos: { name: string; id: string; position: object }[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; id: string; position: object }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"position",value:{name:"object",required:!0}}]}}],raw:"{ name: string; id: string; position: object }[]"},name:"pos"}],return:{name:"void"}}},description:""},centerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(center: { lat: number; lng: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},name:"center"}],return:{name:"void"}}},description:""},singleMarker:{required:!1,tsType:{name:"boolean"},description:""},singleMarkerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(marker: { coordinates: { lat: number; lng: number }; address: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ coordinates: { lat: number; lng: number }; address: string }",signature:{properties:[{key:"coordinates",value:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]},required:!0}},{key:"address",value:{name:"string",required:!0}}]}},name:"marker"}],return:{name:"void"}}},description:""},eventLatitude:{required:!1,tsType:{name:"number"},description:""},eventLongitude:{required:!1,tsType:{name:"number"},description:""},eventAddress:{required:!1,tsType:{name:"string"},description:""}}};export{po as L};
