import{a as h,j as r,F as oe}from"./jsx-runtime-9d2cd5de.js";import{r as u,R as H}from"./index-580b8df0.js";import{X as ue}from"./index-e40656e9.js";import{b as V}from"./index-0bd8f571.js";import{L as de}from"./Link-a8ece75e.js";import{j as X,L as _,y as O,o as I,c as me,u as se,d as A,D as j,p as ie,C as fe,l as M,m as K,t as R}from"./transition-df23ef1c.js";import{L as pe,I as q,n as he,h as ve,F as be,o as g,r as ge,v as ye,f as J,g as ce,A as xe}from"./use-event-listener-472363b9.js";import{F as ke,u as Ie,a as F,x as Ne,v as B}from"./disclosure-bc7b7f17.js";import{s as we,L as D}from"./popover-2558df07.js";import{F as Y}from"./dialog-0b8813e1.js";import"./_commonjsHelpers-042e6b4d.js";import"./index-1eb27dd0.js";var Fe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Fe||{}),Se=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Se||{}),Re=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(Re||{});function U(e,c=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,a=xe(c(e.items.slice()),f=>f.dataRef.current.domRef.current),i=n?a.indexOf(n):null;return i===-1&&(i=null),{items:a,activeItemIndex:i}}let $e={[1](e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},[0](e){return e.menuState===0?e:{...e,menuState:0}},[2]:(e,c)=>{var n;let a=U(e),i=Ne(c,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});return{...e,...a,searchQuery:"",activeItemIndex:i,activationTrigger:(n=c.trigger)!=null?n:1}},[3]:(e,c)=>{let n=e.searchQuery!==""?0:1,a=e.searchQuery+c.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(d=>{var t;return((t=d.dataRef.current.textValue)==null?void 0:t.startsWith(a))&&!d.dataRef.current.disabled}),f=i?e.items.indexOf(i):-1;return f===-1||f===e.activeItemIndex?{...e,searchQuery:a}:{...e,searchQuery:a,activeItemIndex:f,activationTrigger:1}},[4](e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},[5]:(e,c)=>{let n=U(e,a=>[...a,{id:c.id,dataRef:c.dataRef}]);return{...e,...n}},[6]:(e,c)=>{let n=U(e,a=>{let i=a.findIndex(f=>f.id===c.id);return i!==-1&&a.splice(i,1),a});return{...e,...n,activationTrigger:1}}},z=u.createContext(null);z.displayName="MenuContext";function Q(e){let c=u.useContext(z);if(c===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Q),n}return c}function Ce(e,c){return se(c.type,$e,e,c)}let Pe=u.Fragment;function Te(e,c){let n=u.useReducer(Ce,{menuState:1,buttonRef:u.createRef(),itemsRef:u.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:a,itemsRef:i,buttonRef:f},d]=n,t=O(c);pe([f,i],(x,S)=>{var s;d({type:1}),ve(S,be.Loose)||(x.preventDefault(),(s=f.current)==null||s.focus())},a===0);let m=I(()=>{d({type:1})}),v=u.useMemo(()=>({open:a===0,close:m}),[a,m]),N=e,y={ref:t};return H.createElement(z.Provider,{value:n},H.createElement(me,{value:se(a,{[0]:A.Open,[1]:A.Closed})},j({ourProps:y,theirProps:N,slot:v,defaultTag:Pe,name:"Menu"})))}let Me="button";function De(e,c){var n;let a=q(),{id:i=`headlessui-menu-button-${a}`,...f}=e,[d,t]=Q("Menu.Button"),m=O(d.buttonRef,c),v=ie(),N=I(o=>{switch(o.key){case g.Space:case g.Enter:case g.ArrowDown:o.preventDefault(),o.stopPropagation(),t({type:0}),v.nextFrame(()=>t({type:2,focus:F.First}));break;case g.ArrowUp:o.preventDefault(),o.stopPropagation(),t({type:0}),v.nextFrame(()=>t({type:2,focus:F.Last}));break}}),y=I(o=>{switch(o.key){case g.Space:o.preventDefault();break}}),x=I(o=>{if(ge(o.currentTarget))return o.preventDefault();e.disabled||(d.menuState===0?(t({type:1}),v.nextFrame(()=>{var p;return(p=d.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})})):(o.preventDefault(),t({type:0})))}),S=u.useMemo(()=>({open:d.menuState===0}),[d]),s={ref:m,id:i,type:we(e,d.buttonRef),"aria-haspopup":"menu","aria-controls":(n=d.itemsRef.current)==null?void 0:n.id,"aria-expanded":e.disabled?void 0:d.menuState===0,onKeyDown:N,onKeyUp:y,onClick:x};return j({ourProps:s,theirProps:f,slot:S,defaultTag:Me,name:"Menu.Button"})}let Ee="div",Le=X.RenderStrategy|X.Static;function Ae(e,c){var n,a;let i=q(),{id:f=`headlessui-menu-items-${i}`,...d}=e,[t,m]=Q("Menu.Items"),v=O(t.itemsRef,c),N=he(t.itemsRef),y=ie(),x=fe(),S=(()=>x!==null?(x&A.Open)===A.Open:t.menuState===0)();u.useEffect(()=>{let l=t.itemsRef.current;l&&t.menuState===0&&l!==(N==null?void 0:N.activeElement)&&l.focus({preventScroll:!0})},[t.menuState,t.itemsRef,N]),ke({container:t.itemsRef.current,enabled:t.menuState===0,accept(l){return l.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let s=I(l=>{var T,b;switch(y.dispose(),l.key){case g.Space:if(t.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),m({type:3,value:l.key});case g.Enter:if(l.preventDefault(),l.stopPropagation(),m({type:1}),t.activeItemIndex!==null){let{dataRef:w}=t.items[t.activeItemIndex];(b=(T=w.current)==null?void 0:T.domRef.current)==null||b.click()}ce(t.buttonRef.current);break;case g.ArrowDown:return l.preventDefault(),l.stopPropagation(),m({type:2,focus:F.Next});case g.ArrowUp:return l.preventDefault(),l.stopPropagation(),m({type:2,focus:F.Previous});case g.Home:case g.PageUp:return l.preventDefault(),l.stopPropagation(),m({type:2,focus:F.First});case g.End:case g.PageDown:return l.preventDefault(),l.stopPropagation(),m({type:2,focus:F.Last});case g.Escape:l.preventDefault(),l.stopPropagation(),m({type:1}),K().nextFrame(()=>{var w;return(w=t.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})});break;case g.Tab:l.preventDefault(),l.stopPropagation(),m({type:1}),K().nextFrame(()=>{ye(t.buttonRef.current,l.shiftKey?J.Previous:J.Next)});break;default:l.key.length===1&&(m({type:3,value:l.key}),y.setTimeout(()=>m({type:4}),350));break}}),o=I(l=>{switch(l.key){case g.Space:l.preventDefault();break}}),p=u.useMemo(()=>({open:t.menuState===0}),[t]),k={"aria-activedescendant":t.activeItemIndex===null||(n=t.items[t.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(a=t.buttonRef.current)==null?void 0:a.id,id:f,onKeyDown:s,onKeyUp:o,role:"menu",tabIndex:0,ref:v};return j({ourProps:k,theirProps:d,slot:p,defaultTag:Ee,features:Le,visible:S,name:"Menu.Items"})}let _e=u.Fragment;function Oe(e,c){let n=q(),{id:a=`headlessui-menu-item-${n}`,disabled:i=!1,...f}=e,[d,t]=Q("Menu.Item"),m=d.activeItemIndex!==null?d.items[d.activeItemIndex].id===a:!1,v=u.useRef(null),N=O(c,v);M(()=>{if(d.menuState!==0||!m||d.activationTrigger===0)return;let b=K();return b.requestAnimationFrame(()=>{var w,G;(G=(w=v.current)==null?void 0:w.scrollIntoView)==null||G.call(w,{block:"nearest"})}),b.dispose},[v,m,d.menuState,d.activationTrigger,d.activeItemIndex]);let y=u.useRef({disabled:i,domRef:v});M(()=>{y.current.disabled=i},[y,i]),M(()=>{var b,w;y.current.textValue=(w=(b=v.current)==null?void 0:b.textContent)==null?void 0:w.toLowerCase()},[y,v]),M(()=>(t({type:5,id:a,dataRef:y}),()=>t({type:6,id:a})),[y,a]);let x=I(()=>{t({type:1})}),S=I(b=>{if(i)return b.preventDefault();t({type:1}),ce(d.buttonRef.current)}),s=I(()=>{if(i)return t({type:2,focus:F.Nothing});t({type:2,focus:F.Specific,id:a})}),o=Ie(),p=I(b=>o.update(b)),k=I(b=>{o.wasMoved(b)&&(i||m||t({type:2,focus:F.Specific,id:a,trigger:0}))}),l=I(b=>{o.wasMoved(b)&&(i||m&&t({type:2,focus:F.Nothing}))}),T=u.useMemo(()=>({active:m,disabled:i,close:x}),[m,i,x]);return j({ourProps:{id:a,ref:N,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,disabled:void 0,onClick:S,onFocus:s,onPointerEnter:p,onMouseEnter:p,onPointerMove:k,onMouseMove:k,onPointerLeave:l,onMouseLeave:l},theirProps:f,slot:T,defaultTag:_e,name:"Menu.Item"})}let je=_(Te),Qe=_(De),Ve=_(Ae),Be=_(Oe),E=Object.assign(je,{Button:Qe,Items:Ve,Item:Be});const L={dropDownTitles:"inline-flex justify-center text-sm font-medium text-cu-black-800 group hover:text-cu-red",chevron:"flex-shrink-0 w-5 h-5 ml-1 text-cu-black-300 group-hover:text-cu-black-600"};function Z(...e){return e.filter(Boolean).join(" ")}const P=({sortOptions:e,filters:c,callback:n})=>{const[a,i]=u.useState(!1),[f,d]=u.useState(""),[t,m]=u.useState([]),v=s=>t.includes(s),[N,y]=u.useState([]),x=s=>{const o=s;return t.includes(o)?m([...t].filter(p=>p!==o)):m([...t,o])},S=s=>{const o=s;return m([...t].filter(p=>p!==o))};return u.useEffect(()=>{d(f),y(t)},[f,t]),u.useEffect(()=>{n(t)},[t,n]),h("div",{className:"not-prose",children:[r(R.Root,{show:a,as:u.Fragment,children:h(Y,{as:"div",className:"relative z-40 sm:hidden",onClose:i,children:[r(R.Child,{as:u.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:r("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),r("div",{className:"fixed inset-0 z-40 flex",children:r(R.Child,{as:u.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:h(Y.Panel,{className:"relative ml-auto flex h-full w-full max-w-xs flex-col overflow-y-auto bg-white shadow-xl",children:[h("div",{className:"flex items-center justify-between bg-cu-black-50 px-4 py-3",children:[r("h2",{className:"text-base font-medium text-cu-black-800",children:"Filters"}),h("button",{type:"button",className:"-mr-1 flex h-8 w-8 items-center justify-center rounded-md bg-white p-2 text-cu-black-600",onClick:()=>i(!1),children:[r("span",{className:"sr-only",children:"Close menu"}),r(ue,{className:"h-6 w-6","aria-hidden":"true"})]})]}),r("form",{children:c.map(s=>r(B,{as:"div",className:"border-t border-cu-black-100 px-4 py-6",children:({open:o})=>h(oe,{children:[r("h3",{className:"group -mx-2 -my-3 flow-root",children:h(B.Button,{className:"flex w-full items-center justify-between bg-white px-2 py-3 text-sm text-cu-black-300 group-hover:text-cu-black-600",children:[r("span",{className:"font-medium text-cu-black-600",children:s.name}),r("span",{className:"ml-6 flex items-center",children:r(V,{className:Z(o?"-rotate-180":"rotate-0","h-5 w-5 transform"),"aria-hidden":"true"})})]})}),r(B.Panel,{className:"pt-6",children:r("div",{className:"space-y-6",children:s.options.map((p,k)=>h("div",{className:"flex items-center",children:[r("input",{id:`filter-mobile-${s.id}-${k}`,name:`${s.id}[]`,defaultValue:p.label,type:"checkbox",onChange:()=>x(p.label),defaultChecked:v(p.label),className:"h-4 w-4 rounded border-cu-black-200 text-cu-red focus:ring-cu-red-100"}),r("label",{htmlFor:`filter-mobile-${s.id}-${k}`,className:"ml-3 text-sm text-cu-black-600",children:p.label})]},k))})})]})},s.name))})]})})})]})}),h("section",{"aria-labelledby":"filter-heading",children:[r("h2",{id:"filter-heading",className:"sr-only",children:"Filters"}),r("div",{className:"rounded-tl-lg rounded-tr-lg border border-cu-black-100 bg-gray-50 py-4",children:h("div",{className:"flex justify-between px-4 sm:px-6",children:[h(E,{as:"div",className:"relative",children:[e&&(e==null?void 0:e.length)>0&&r("div",{children:h(E.Button,{className:L.dropDownTitles,children:["Sort",r(V,{className:L.chevron,"aria-hidden":"true"})]})}),r(R,{as:u.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:r(E.Items,{className:"absolute -left-4 z-10 mt-2 w-40 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e&&(e==null?void 0:e.length)>0&&r("div",{className:"py-1",children:e.map(s=>r(E.Item,{children:({active:o})=>r(de,{href:s.href,className:Z(s.name===f?"font-medium text-cu-black-800":"text-cu-black-600",o?"bg-gray-100":"","block px-4 py-2 text-sm")})},s.name))})})})]}),r("button",{type:"button",className:"inline-block text-sm font-medium text-cu-black-800 hover:text-cu-red sm:hidden",onClick:()=>i(!0),children:"Filters"}),r("div",{className:"hidden sm:block",children:r("div",{className:"flow-root",children:r(D.Group,{className:"-mx-4 flex items-center divide-x divide-gray-200",children:c.map((s,o)=>h(D,{className:"relative inline-block px-4 text-left",children:[h(D.Button,{className:L.dropDownTitles,children:[r("span",{children:s.name}),r(V,{className:L.chevron,"aria-hidden":"true"})]}),r(R,{as:u.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:r(D.Panel,{className:"absolute right-0 z-10 mt-2 rounded-md bg-white p-4 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:r("form",{className:"space-y-4",children:s.options.map((p,k)=>h("div",{className:"flex items-center",children:[r("input",{id:`filter-${s.id}-${k}`,name:`${s.id}[]`,defaultValue:p.label,type:"checkbox",onChange:()=>x(p.label),defaultChecked:v(p.label),className:"h-4 w-4 rounded border-cu-black-200 text-cu-red focus:ring-cu-red-100"}),r("label",{htmlFor:`filter-${s.id}-${k}`,className:"ml-3 whitespace-nowrap pr-6 text-sm text-cu-black-600",children:p.label})]},k))})})})]},o))})})})]})}),r("div",{className:"rounded-bl-lg rounded-br-lg border border-t-0 border-cu-black-100 bg-white",children:h("div",{className:"px-4 py-3 sm:flex sm:items-center sm:px-6",children:[h("h3",{className:"py-1 text-sm text-cu-black-600",children:["Filters",r("span",{className:"sr-only",children:", active"})]}),r("div",{"aria-hidden":"true",className:"hidden h-5 w-px bg-gray-300 sm:ml-4 sm:block"}),r("div",{className:"mt-4 sm:mt-0 sm:ml-4",children:r("div",{className:"-m-1 flex flex-wrap items-center gap-3",children:N.map((s,o)=>h("span",{className:"inline-flex items-center rounded-lg border border-cu-black-100 bg-white py-1 pl-3 pr-2 text-sm text-cu-black-600",children:[r("span",{children:s}),h("button",{type:"button",onClick:()=>S(s),className:"ml-1 inline-flex h-4 w-4 flex-shrink-0 rounded-full p-1 text-cu-black-400 hover:bg-cu-red hover:text-white",children:[h("span",{className:"sr-only",children:["Remove filter for ",s]}),r("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:r("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})]})]},o))})})]})})]})]})};try{P.displayName="Filter",P.__docgenInfo={description:"",displayName:"Filter",props:{sortOptions:{defaultValue:null,description:"",name:"sortOptions",required:!1,type:{name:"{ name: string; href: string; current: boolean; }[]"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"{ id: string; name: string; options: { value: string; label: string; checked: boolean; }[]; }[]"}},callback:{defaultValue:null,description:"",name:"callback",required:!0,type:{name:"(k: string[]) => void"}}}}}catch{}const Ue="Filter",Ke=".filter",We=[{name:"Daily",href:"#",current:!1},{name:"Weekly",href:"#",current:!1},{name:"Monthly",href:"#",current:!1}],qe=[{id:"audience",name:"Audience",options:[{value:"staff",label:"Staff",checked:!1},{value:"student",label:"Student",checked:!1}]},{id:"tags",name:"Tags",options:[{value:"general",label:"General",checked:!1},{value:"online/virtual",label:"Online/Virtual",checked:!1},{value:"finances",label:"Finances",checked:!1},{value:"healthyworkplace",label:"Healthy Workplace",checked:!1}]}],W={title:Ue,classname:Ke,sortOptions:We,filters:qe},nt={title:"Components/Filter",component:P,tags:["autodocs"],parameters:{controls:{sort:"requiredFirst"}}},$=()=>{const[,e]=u.useState([]),c=u.useCallback(n=>{e(n)},[e]);return r(P,{filters:W.filters,callback:c,sortOptions:W.sortOptions})},C=()=>{const[,e]=u.useState([]),c=u.useCallback(n=>{e(n)},[e]);return r(P,{filters:W.filters,callback:c})};$.storyName="With Sorting";C.storyName="Without Sorting";var ee,te,re;$.parameters={...$.parameters,docs:{...(ee=$.parameters)==null?void 0:ee.docs,source:{originalSource:`() => {
  const [, setFilterItem] = useState([]);
  const callbackfilter = useCallback((filterSelected: any) => {
    setFilterItem(filterSelected);
  }, [setFilterItem]);
  return <Filter filters={data.filters} callback={callbackfilter} sortOptions={data.sortOptions} />;
}`,...(re=(te=$.parameters)==null?void 0:te.docs)==null?void 0:re.source}}};var ae,le,ne;C.parameters={...C.parameters,docs:{...(ae=C.parameters)==null?void 0:ae.docs,source:{originalSource:`() => {
  const [, setFilterItem] = useState([]);
  const callbackfilter = useCallback((filterSelected: any) => {
    setFilterItem(filterSelected);
  }, [setFilterItem]);
  return <Filter filters={data.filters} callback={callbackfilter} />;
}`,...(ne=(le=C.parameters)==null?void 0:le.docs)==null?void 0:ne.source}}};const st=["Default","NoSorting"];export{$ as Default,C as NoSorting,st as __namedExportsOrder,nt as default};
//# sourceMappingURL=Filter.stories-88c52329.js.map
