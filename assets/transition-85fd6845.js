import{r as i,R as E}from"./index-37ba2b57.js";import{l as M,u as $,a as Q,p as re,s as D,S as me,D as W,y as te,j as x,b as ne,o as w,t as Z,c as pe,d as C,X as le,C as ae}from"./open-closed-452e92a4.js";function X(){let r=i.useRef(!1);return M(()=>(r.current=!0,()=>{r.current=!1}),[]),r}function he(r=0){let[e,t]=i.useState(r),a=X(),f=i.useCallback(s=>{a.current&&t(n=>n|s)},[e,a]),p=i.useCallback(s=>!!(e&s),[e]),v=i.useCallback(s=>{a.current&&t(n=>n&~s)},[t,a]),c=i.useCallback(s=>{a.current&&t(n=>n^s)},[t]);return{flags:e,addFlag:f,hasFlag:p,removeFlag:v,toggleFlag:c}}function be(r){let e={called:!1};return(...t)=>{if(!e.called)return e.called=!0,r(...t)}}function G(r,...e){r&&e.length>0&&r.classList.add(...e)}function I(r,...e){r&&e.length>0&&r.classList.remove(...e)}function ge(r,e){let t=Q();if(!r)return t.dispose;let{transitionDuration:a,transitionDelay:f}=getComputedStyle(r),[p,v]=[a,f].map(s=>{let[n=0]=s.split(",").filter(Boolean).map(o=>o.includes("ms")?parseFloat(o):parseFloat(o)*1e3).sort((o,b)=>b-o);return n}),c=p+v;if(c!==0){t.group(n=>{n.setTimeout(()=>{e(),n.dispose()},c),n.addEventListener(r,"transitionrun",o=>{o.target===o.currentTarget&&n.dispose()})});let s=t.addEventListener(r,"transitionend",n=>{n.target===n.currentTarget&&(e(),s())})}else e();return t.add(()=>e()),t.dispose}function Ee(r,e,t,a){let f=t?"enter":"leave",p=Q(),v=a!==void 0?be(a):()=>{};f==="enter"&&(r.removeAttribute("hidden"),r.style.display="");let c=$(f,{enter:()=>e.enter,leave:()=>e.leave}),s=$(f,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),n=$(f,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return I(r,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),G(r,...e.base,...c,...n),p.nextFrame(()=>{I(r,...e.base,...c,...n),G(r,...e.base,...c,...s),ge(r,()=>(I(r,...e.base,...c),G(r,...e.base,...e.entered),v()))}),p.dispose}function Te({immediate:r,container:e,direction:t,classes:a,onStart:f,onStop:p}){let v=X(),c=re(),s=D(t);M(()=>{r&&(s.current="enter")},[r]),M(()=>{let n=Q();c.add(n.dispose);let o=e.current;if(o&&s.current!=="idle"&&v.current)return n.dispose(),f.current(s.current),n.add(Ee(o,a.current,s.current==="enter",()=>{n.dispose(),p.current(s.current)})),n.dispose},[t])}function F(r=""){return r.split(" ").filter(e=>e.trim().length>1)}let U=i.createContext(null);U.displayName="TransitionContext";var Fe=(r=>(r.Visible="visible",r.Hidden="hidden",r))(Fe||{});function Ce(){let r=i.useContext(U);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}function $e(){let r=i.useContext(j);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}let j=i.createContext(null);j.displayName="NestingContext";function B(r){return"children"in r?B(r.children):r.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function ie(r,e){let t=D(r),a=i.useRef([]),f=X(),p=re(),v=w((m,u=x.Hidden)=>{let d=a.current.findIndex(({el:l})=>l===m);d!==-1&&($(u,{[x.Unmount](){a.current.splice(d,1)},[x.Hidden](){a.current[d].state="hidden"}}),p.microTask(()=>{var l;!B(a)&&f.current&&((l=t.current)==null||l.call(t))}))}),c=w(m=>{let u=a.current.find(({el:d})=>d===m);return u?u.state!=="visible"&&(u.state="visible"):a.current.push({el:m,state:"visible"}),()=>v(m,x.Unmount)}),s=i.useRef([]),n=i.useRef(Promise.resolve()),o=i.useRef({enter:[],leave:[],idle:[]}),b=w((m,u,d)=>{s.current.splice(0),e&&(e.chains.current[u]=e.chains.current[u].filter(([l])=>l!==m)),e==null||e.chains.current[u].push([m,new Promise(l=>{s.current.push(l)})]),e==null||e.chains.current[u].push([m,new Promise(l=>{Promise.all(o.current[u].map(([L,P])=>P)).then(()=>l())})]),u==="enter"?n.current=n.current.then(()=>e==null?void 0:e.wait.current).then(()=>d(u)):d(u)}),g=w((m,u,d)=>{Promise.all(o.current[u].splice(0).map(([l,L])=>L)).then(()=>{var l;(l=s.current.shift())==null||l()}).then(()=>d(u))});return i.useMemo(()=>({children:a,register:c,unregister:v,onStart:b,onStop:g,wait:n,chains:o}),[c,v,a,b,g,o,n])}function we(){}let Re=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function ee(r){var e;let t={};for(let a of Re)t[a]=(e=r[a])!=null?e:we;return t}function Se(r){let e=i.useRef(ee(r));return i.useEffect(()=>{e.current=ee(r)},[r]),e}let xe="div",se=me.RenderStrategy;function Le(r,e){var t,a;let{beforeEnter:f,afterEnter:p,beforeLeave:v,afterLeave:c,enter:s,enterFrom:n,enterTo:o,entered:b,leave:g,leaveFrom:m,leaveTo:u,...d}=r,l=i.useRef(null),L=te(l,e),P=(t=d.unmount)==null||t?x.Unmount:x.Hidden,{show:h,appear:R,initial:_}=Ce(),[S,V]=i.useState(h?"visible":"hidden"),J=$e(),{register:O,unregister:H}=J;i.useEffect(()=>O(l),[O,l]),i.useEffect(()=>{if(P===x.Hidden&&l.current){if(h&&S!=="visible"){V("visible");return}return $(S,{hidden:()=>H(l),visible:()=>O(l)})}},[S,l,O,H,h,P]);let q=D({base:F(d.className),enter:F(s),enterFrom:F(n),enterTo:F(o),entered:F(b),leave:F(g),leaveFrom:F(m),leaveTo:F(u)}),k=Se({beforeEnter:f,afterEnter:p,beforeLeave:v,afterLeave:c}),z=ne();i.useEffect(()=>{if(z&&S==="visible"&&l.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[l,S,z]);let oe=_&&!R,Y=R&&h&&_,ce=(()=>!z||oe?"idle":h?"enter":"leave")(),N=he(0),de=w(T=>$(T,{enter:()=>{N.addFlag(C.Opening),k.current.beforeEnter()},leave:()=>{N.addFlag(C.Closing),k.current.beforeLeave()},idle:()=>{}})),fe=w(T=>$(T,{enter:()=>{N.removeFlag(C.Opening),k.current.afterEnter()},leave:()=>{N.removeFlag(C.Closing),k.current.afterLeave()},idle:()=>{}})),A=ie(()=>{V("hidden"),H(l)},J);Te({immediate:Y,container:l,classes:q,direction:ce,onStart:D(T=>{A.onStart(l,T,de)}),onStop:D(T=>{A.onStop(l,T,fe),T==="leave"&&!B(A)&&(V("hidden"),H(l))})});let y=d,ve={ref:L};return Y?y={...y,className:Z(d.className,...q.current.enter,...q.current.enterFrom)}:(y.className=Z(d.className,(a=l.current)==null?void 0:a.className),y.className===""&&delete y.className),E.createElement(j.Provider,{value:A},E.createElement(pe,{value:$(S,{visible:C.Open,hidden:C.Closed})|N.flags},le({ourProps:ve,theirProps:y,defaultTag:xe,features:se,visible:S==="visible",name:"Transition.Child"})))}function Pe(r,e){let{show:t,appear:a=!1,unmount:f=!0,...p}=r,v=i.useRef(null),c=te(v,e);ne();let s=ae();if(t===void 0&&s!==null&&(t=(s&C.Open)===C.Open),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[n,o]=i.useState(t?"visible":"hidden"),b=ie(()=>{o("hidden")}),[g,m]=i.useState(!0),u=i.useRef([t]);M(()=>{g!==!1&&u.current[u.current.length-1]!==t&&(u.current.push(t),m(!1))},[u,t]);let d=i.useMemo(()=>({show:t,appear:a,initial:g}),[t,a,g]);i.useEffect(()=>{if(t)o("visible");else if(!B(b))o("hidden");else{let h=v.current;if(!h)return;let R=h.getBoundingClientRect();R.x===0&&R.y===0&&R.width===0&&R.height===0&&o("hidden")}},[t,b]);let l={unmount:f},L=w(()=>{var h;g&&m(!1),(h=r.beforeEnter)==null||h.call(r)}),P=w(()=>{var h;g&&m(!1),(h=r.beforeLeave)==null||h.call(r)});return E.createElement(j.Provider,{value:b},E.createElement(U.Provider,{value:d},le({ourProps:{...l,as:i.Fragment,children:E.createElement(ue,{ref:c,...l,...p,beforeEnter:L,beforeLeave:P})},theirProps:{},defaultTag:i.Fragment,features:se,visible:n==="visible",name:"Transition"})))}function ye(r,e){let t=i.useContext(U)!==null,a=ae()!==null;return E.createElement(E.Fragment,null,!t&&a?E.createElement(K,{ref:e,...r}):E.createElement(ue,{ref:e,...r}))}let K=W(Pe),ue=W(Le),Ne=W(ye),He=Object.assign(K,{Child:Ne,Root:K});export{X as f,He as t};
//# sourceMappingURL=transition-85fd6845.js.map
