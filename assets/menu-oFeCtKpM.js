import{r as m,R as N}from"./index-4g5l5LRQ.js";import{o as v,S as Q,D as F,y as T,c as G,u as V,d as P,X as E,p as j,C as H,l as C,a as $}from"./transition-8qPHkook.js";import{h as J,I as _,n as W,d as X,T as z,o as d,r as Y,_ as Z,M as U,D as q,g as ee}from"./use-root-containers-7zw4BiR7.js";import{F as te,u as re,a as y,x as ne}from"./use-tracked-pointer-EZY5uaCR.js";import{s as ae}from"./use-resolve-button-type-kFzmZbAv.js";let B=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function K(e){var i,a;let r=(i=e.innerText)!=null?i:"",n=e.cloneNode(!0);if(!(n instanceof HTMLElement))return r;let l=!1;for(let t of n.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))t.remove(),l=!0;let o=l?(a=n.innerText)!=null?a:"":r;return B.test(o)&&(o=o.replace(B,"")),o}function ue(e){let i=e.getAttribute("aria-label");if(typeof i=="string")return i.trim();let a=e.getAttribute("aria-labelledby");if(a){let r=a.split(" ").map(n=>{let l=document.getElementById(n);if(l){let o=l.getAttribute("aria-label");return typeof o=="string"?o.trim():K(l).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return K(e).trim()}function oe(e){let i=m.useRef(""),a=m.useRef("");return v(()=>{let r=e.current;if(!r)return"";let n=r.innerText;if(i.current===n)return a.current;let l=ue(r).trim().toLowerCase();return i.current=n,a.current=l,l})}var ie=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ie||{}),le=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(le||{}),se=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(se||{});function A(e,i=a=>a){let a=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=ee(i(e.items.slice()),l=>l.dataRef.current.domRef.current),n=a?r.indexOf(a):null;return n===-1&&(n=null),{items:r,activeItemIndex:n}}let ce={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,i)=>{var a;let r=A(e),n=ne(i,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:l=>l.id,resolveDisabled:l=>l.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeItemIndex:n,activationTrigger:(a=i.trigger)!=null?a:1}},3:(e,i)=>{let a=e.searchQuery!==""?0:1,r=e.searchQuery+i.value.toLowerCase(),n=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+a).concat(e.items.slice(0,e.activeItemIndex+a)):e.items).find(o=>{var t;return((t=o.dataRef.current.textValue)==null?void 0:t.startsWith(r))&&!o.dataRef.current.disabled}),l=n?e.items.indexOf(n):-1;return l===-1||l===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:l,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,i)=>{let a=A(e,r=>[...r,{id:i.id,dataRef:i.dataRef}]);return{...e,...a}},6:(e,i)=>{let a=A(e,r=>{let n=r.findIndex(l=>l.id===i.id);return n!==-1&&r.splice(n,1),r});return{...e,...a,activationTrigger:1}}},O=m.createContext(null);O.displayName="MenuContext";function k(e){let i=m.useContext(O);if(i===null){let a=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,k),a}return i}function de(e,i){return V(i.type,ce,e,i)}let me=m.Fragment;function fe(e,i){let{__demoMode:a=!1,...r}=e,n=m.useReducer(de,{__demoMode:a,menuState:a?0:1,buttonRef:m.createRef(),itemsRef:m.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsRef:o,buttonRef:t},s]=n,p=T(i);J([t,o],(R,h)=>{var c;s({type:1}),X(h,z.Loose)||(R.preventDefault(),(c=t.current)==null||c.focus())},l===0);let g=v(()=>{s({type:1})}),b=m.useMemo(()=>({open:l===0,close:g}),[l,g]),I={ref:p};return N.createElement(O.Provider,{value:n},N.createElement(G,{value:V(l,{0:P.Open,1:P.Closed})},E({ourProps:I,theirProps:r,slot:b,defaultTag:me,name:"Menu"})))}let pe="button";function ve(e,i){var a;let r=_(),{id:n=`headlessui-menu-button-${r}`,...l}=e,[o,t]=k("Menu.Button"),s=T(o.buttonRef,i),p=j(),g=v(c=>{switch(c.key){case d.Space:case d.Enter:case d.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:y.First}));break;case d.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:y.Last}));break}}),b=v(c=>{switch(c.key){case d.Space:c.preventDefault();break}}),I=v(c=>{if(Y(c.currentTarget))return c.preventDefault();e.disabled||(o.menuState===0?(t({type:1}),p.nextFrame(()=>{var x;return(x=o.buttonRef.current)==null?void 0:x.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),R=m.useMemo(()=>({open:o.menuState===0}),[o]),h={ref:s,id:n,type:ae(e,o.buttonRef),"aria-haspopup":"menu","aria-controls":(a=o.itemsRef.current)==null?void 0:a.id,"aria-expanded":o.menuState===0,onKeyDown:g,onKeyUp:b,onClick:I};return E({ourProps:h,theirProps:l,slot:R,defaultTag:pe,name:"Menu.Button"})}let Ie="div",ge=Q.RenderStrategy|Q.Static;function ye(e,i){var a,r;let n=_(),{id:l=`headlessui-menu-items-${n}`,...o}=e,[t,s]=k("Menu.Items"),p=T(t.itemsRef,i),g=W(t.itemsRef),b=j(),I=H(),R=I!==null?(I&P.Open)===P.Open:t.menuState===0;m.useEffect(()=>{let u=t.itemsRef.current;u&&t.menuState===0&&u!==(g==null?void 0:g.activeElement)&&u.focus({preventScroll:!0})},[t.menuState,t.itemsRef,g]),te({container:t.itemsRef.current,enabled:t.menuState===0,accept(u){return u.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});let h=v(u=>{var S,M;switch(b.dispose(),u.key){case d.Space:if(t.searchQuery!=="")return u.preventDefault(),u.stopPropagation(),s({type:3,value:u.key});case d.Enter:if(u.preventDefault(),u.stopPropagation(),s({type:1}),t.activeItemIndex!==null){let{dataRef:f}=t.items[t.activeItemIndex];(M=(S=f.current)==null?void 0:S.domRef.current)==null||M.click()}q(t.buttonRef.current);break;case d.ArrowDown:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:y.Next});case d.ArrowUp:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:y.Previous});case d.Home:case d.PageUp:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:y.First});case d.End:case d.PageDown:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:y.Last});case d.Escape:u.preventDefault(),u.stopPropagation(),s({type:1}),$().nextFrame(()=>{var f;return(f=t.buttonRef.current)==null?void 0:f.focus({preventScroll:!0})});break;case d.Tab:u.preventDefault(),u.stopPropagation(),s({type:1}),$().nextFrame(()=>{Z(t.buttonRef.current,u.shiftKey?U.Previous:U.Next)});break;default:u.key.length===1&&(s({type:3,value:u.key}),b.setTimeout(()=>s({type:4}),350));break}}),c=v(u=>{switch(u.key){case d.Space:u.preventDefault();break}}),x=m.useMemo(()=>({open:t.menuState===0}),[t]),D={"aria-activedescendant":t.activeItemIndex===null||(a=t.items[t.activeItemIndex])==null?void 0:a.id,"aria-labelledby":(r=t.buttonRef.current)==null?void 0:r.id,id:l,onKeyDown:h,onKeyUp:c,role:"menu",tabIndex:0,ref:p};return E({ourProps:D,theirProps:o,slot:x,defaultTag:Ie,features:ge,visible:R,name:"Menu.Items"})}let be=m.Fragment;function Re(e,i){let a=_(),{id:r=`headlessui-menu-item-${a}`,disabled:n=!1,...l}=e,[o,t]=k("Menu.Item"),s=o.activeItemIndex!==null?o.items[o.activeItemIndex].id===r:!1,p=m.useRef(null),g=T(i,p);C(()=>{if(o.__demoMode||o.menuState!==0||!s||o.activationTrigger===0)return;let f=$();return f.requestAnimationFrame(()=>{var w,L;(L=(w=p.current)==null?void 0:w.scrollIntoView)==null||L.call(w,{block:"nearest"})}),f.dispose},[o.__demoMode,p,s,o.menuState,o.activationTrigger,o.activeItemIndex]);let b=oe(p),I=m.useRef({disabled:n,domRef:p,get textValue(){return b()}});C(()=>{I.current.disabled=n},[I,n]),C(()=>(t({type:5,id:r,dataRef:I}),()=>t({type:6,id:r})),[I,r]);let R=v(()=>{t({type:1})}),h=v(f=>{if(n)return f.preventDefault();t({type:1}),q(o.buttonRef.current)}),c=v(()=>{if(n)return t({type:2,focus:y.Nothing});t({type:2,focus:y.Specific,id:r})}),x=re(),D=v(f=>x.update(f)),u=v(f=>{x.wasMoved(f)&&(n||s||t({type:2,focus:y.Specific,id:r,trigger:0}))}),S=v(f=>{x.wasMoved(f)&&(n||s&&t({type:2,focus:y.Nothing}))}),M=m.useMemo(()=>({active:s,disabled:n,close:R}),[s,n,R]);return E({ourProps:{id:r,ref:g,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:c,onPointerEnter:D,onMouseEnter:D,onPointerMove:u,onMouseMove:u,onPointerLeave:S,onMouseLeave:S},theirProps:l,slot:M,defaultTag:be,name:"Menu.Item"})}let xe=F(fe),he=F(ve),Se=F(ye),De=F(Re),ke=Object.assign(xe,{Button:he,Items:Se,Item:De});export{ke as i};
