import{j as t}from"./jsx-runtime-3aeb2321.js";import{r as m,R as G}from"./index-580b8df0.js";import{X as oe}from"./index-d638a58e.js";import{C as Q}from"./index-f976a069.js";import{L as ce}from"./Link-d122182d.js";import{S as X}from"./dialog-40633ea3.js";import{v as V}from"./disclosure-ec71063b.js";import{S as H,D as A,y as L,o as k,c as ue,u as ne,d as E,X as _,p as le,C as de,l as $,a as U}from"./open-closed-2007ab4d.js";import{L as me,I as W,h as fe,T as pe,o as v,r as xe,_ as he,M as J,D as ie,a as ve}from"./keyboard-7b7aa261.js";import{F as be,u as ge,a as N,x as ye}from"./use-tracked-pointer-88919d7e.js";import{s as ke}from"./use-resolve-button-type-acf5cd20.js";import{n as je}from"./use-event-listener-4e982338.js";import{t as S}from"./transition-4a057a81.js";import{L as C}from"./popover-3492950b.js";import"./_commonjsHelpers-042e6b4d.js";import"./iframe-4f592a94.js";import"../sb-preview/runtime.mjs";import"./platform-cc7c4922.js";import"./index-1eb27dd0.js";var Ie=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ie||{}),Ne=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ne||{}),we=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(we||{});function B(e,c=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,a=ve(c(e.items.slice()),f=>f.dataRef.current.domRef.current),l=o?a.indexOf(o):null;return l===-1&&(l=null),{items:a,activeItemIndex:l}}let Se={[1](e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},[0](e){return e.menuState===0?e:{...e,menuState:0}},[2]:(e,c)=>{var o;let a=B(e),l=ye(c,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});return{...e,...a,searchQuery:"",activeItemIndex:l,activationTrigger:(o=c.trigger)!=null?o:1}},[3]:(e,c)=>{let o=e.searchQuery!==""?0:1,a=e.searchQuery+c.value.toLowerCase(),l=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(u=>{var r;return((r=u.dataRef.current.textValue)==null?void 0:r.startsWith(a))&&!u.dataRef.current.disabled}),f=l?e.items.indexOf(l):-1;return f===-1||f===e.activeItemIndex?{...e,searchQuery:a}:{...e,searchQuery:a,activeItemIndex:f,activationTrigger:1}},[4](e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},[5]:(e,c)=>{let o=B(e,a=>[...a,{id:c.id,dataRef:c.dataRef}]);return{...e,...o}},[6]:(e,c)=>{let o=B(e,a=>{let l=a.findIndex(f=>f.id===c.id);return l!==-1&&a.splice(l,1),a});return{...e,...o,activationTrigger:1}}},q=m.createContext(null);q.displayName="MenuContext";function O(e){let c=m.useContext(q);if(c===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,O),o}return c}function Fe(e,c){return ne(c.type,Se,e,c)}let Re=m.Fragment;function De(e,c){let o=m.useReducer(Fe,{menuState:1,buttonRef:m.createRef(),itemsRef:m.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:a,itemsRef:l,buttonRef:f},u]=o,r=L(c);me([f,l],(g,w)=>{var n;u({type:1}),fe(w,pe.Loose)||(g.preventDefault(),(n=f.current)==null||n.focus())},a===0);let d=k(()=>{u({type:1})}),x=m.useMemo(()=>({open:a===0,close:d}),[a,d]),j=e,b={ref:r};return G.createElement(q.Provider,{value:o},G.createElement(ue,{value:ne(a,{[0]:E.Open,[1]:E.Closed})},_({ourProps:b,theirProps:j,slot:x,defaultTag:Re,name:"Menu"})))}let Te="button";function $e(e,c){var o;let a=W(),{id:l=`headlessui-menu-button-${a}`,...f}=e,[u,r]=O("Menu.Button"),d=L(u.buttonRef,c),x=le(),j=k(i=>{switch(i.key){case v.Space:case v.Enter:case v.ArrowDown:i.preventDefault(),i.stopPropagation(),r({type:0}),x.nextFrame(()=>r({type:2,focus:N.First}));break;case v.ArrowUp:i.preventDefault(),i.stopPropagation(),r({type:0}),x.nextFrame(()=>r({type:2,focus:N.Last}));break}}),b=k(i=>{switch(i.key){case v.Space:i.preventDefault();break}}),g=k(i=>{if(xe(i.currentTarget))return i.preventDefault();e.disabled||(u.menuState===0?(r({type:1}),x.nextFrame(()=>{var p;return(p=u.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})})):(i.preventDefault(),r({type:0})))}),w=m.useMemo(()=>({open:u.menuState===0}),[u]),n={ref:d,id:l,type:ke(e,u.buttonRef),"aria-haspopup":"menu","aria-controls":(o=u.itemsRef.current)==null?void 0:o.id,"aria-expanded":e.disabled?void 0:u.menuState===0,onKeyDown:j,onKeyUp:b,onClick:g};return _({ourProps:n,theirProps:f,slot:w,defaultTag:Te,name:"Menu.Button"})}let Ce="div",Pe=H.RenderStrategy|H.Static;function Me(e,c){var o,a;let l=W(),{id:f=`headlessui-menu-items-${l}`,...u}=e,[r,d]=O("Menu.Items"),x=L(r.itemsRef,c),j=je(r.itemsRef),b=le(),g=de(),w=(()=>g!==null?(g&E.Open)===E.Open:r.menuState===0)();m.useEffect(()=>{let s=r.itemsRef.current;s&&r.menuState===0&&s!==(j==null?void 0:j.activeElement)&&s.focus({preventScroll:!0})},[r.menuState,r.itemsRef,j]),be({container:r.itemsRef.current,enabled:r.menuState===0,accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});let n=k(s=>{var T,h;switch(b.dispose(),s.key){case v.Space:if(r.searchQuery!=="")return s.preventDefault(),s.stopPropagation(),d({type:3,value:s.key});case v.Enter:if(s.preventDefault(),s.stopPropagation(),d({type:1}),r.activeItemIndex!==null){let{dataRef:I}=r.items[r.activeItemIndex];(h=(T=I.current)==null?void 0:T.domRef.current)==null||h.click()}ie(r.buttonRef.current);break;case v.ArrowDown:return s.preventDefault(),s.stopPropagation(),d({type:2,focus:N.Next});case v.ArrowUp:return s.preventDefault(),s.stopPropagation(),d({type:2,focus:N.Previous});case v.Home:case v.PageUp:return s.preventDefault(),s.stopPropagation(),d({type:2,focus:N.First});case v.End:case v.PageDown:return s.preventDefault(),s.stopPropagation(),d({type:2,focus:N.Last});case v.Escape:s.preventDefault(),s.stopPropagation(),d({type:1}),U().nextFrame(()=>{var I;return(I=r.buttonRef.current)==null?void 0:I.focus({preventScroll:!0})});break;case v.Tab:s.preventDefault(),s.stopPropagation(),d({type:1}),U().nextFrame(()=>{he(r.buttonRef.current,s.shiftKey?J.Previous:J.Next)});break;default:s.key.length===1&&(d({type:3,value:s.key}),b.setTimeout(()=>d({type:4}),350));break}}),i=k(s=>{switch(s.key){case v.Space:s.preventDefault();break}}),p=m.useMemo(()=>({open:r.menuState===0}),[r]),y={"aria-activedescendant":r.activeItemIndex===null||(o=r.items[r.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(a=r.buttonRef.current)==null?void 0:a.id,id:f,onKeyDown:n,onKeyUp:i,role:"menu",tabIndex:0,ref:x};return _({ourProps:y,theirProps:u,slot:p,defaultTag:Ce,features:Pe,visible:w,name:"Menu.Items"})}let Ee=m.Fragment;function Ae(e,c){let o=W(),{id:a=`headlessui-menu-item-${o}`,disabled:l=!1,...f}=e,[u,r]=O("Menu.Item"),d=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===a:!1,x=m.useRef(null),j=L(c,x);$(()=>{if(u.menuState!==0||!d||u.activationTrigger===0)return;let h=U();return h.requestAnimationFrame(()=>{var I,z;(z=(I=x.current)==null?void 0:I.scrollIntoView)==null||z.call(I,{block:"nearest"})}),h.dispose},[x,d,u.menuState,u.activationTrigger,u.activeItemIndex]);let b=m.useRef({disabled:l,domRef:x});$(()=>{b.current.disabled=l},[b,l]),$(()=>{var h,I;b.current.textValue=(I=(h=x.current)==null?void 0:h.textContent)==null?void 0:I.toLowerCase()},[b,x]),$(()=>(r({type:5,id:a,dataRef:b}),()=>r({type:6,id:a})),[b,a]);let g=k(()=>{r({type:1})}),w=k(h=>{if(l)return h.preventDefault();r({type:1}),ie(u.buttonRef.current)}),n=k(()=>{if(l)return r({type:2,focus:N.Nothing});r({type:2,focus:N.Specific,id:a})}),i=ge(),p=k(h=>i.update(h)),y=k(h=>{i.wasMoved(h)&&(l||d||r({type:2,focus:N.Specific,id:a,trigger:0}))}),s=k(h=>{i.wasMoved(h)&&(l||d&&r({type:2,focus:N.Nothing}))}),T=m.useMemo(()=>({active:d,disabled:l,close:g}),[d,l,g]);return _({ourProps:{id:a,ref:j,role:"menuitem",tabIndex:l===!0?void 0:-1,"aria-disabled":l===!0?!0:void 0,disabled:void 0,onClick:w,onFocus:n,onPointerEnter:p,onMouseEnter:p,onPointerMove:y,onMouseMove:y,onPointerLeave:s,onMouseLeave:s},theirProps:f,slot:T,defaultTag:Ee,name:"Menu.Item"})}let Le=A(De),_e=A($e),Oe=A(Me),Qe=A(Ae),P=Object.assign(Le,{Button:_e,Items:Oe,Item:Qe});const M={dropDownTitles:"inline-flex justify-center text-sm font-medium text-cu-black-800 group hover:text-cu-red",chevron:"flex-shrink-0 w-5 h-5 ml-1 text-cu-black-300 group-hover:text-cu-black-600"};function Y(...e){return e.filter(Boolean).join(" ")}const D=({sortOptions:e,filters:c,callback:o})=>{const[a,l]=m.useState(!1),[f,u]=m.useState(""),[r,d]=m.useState([]),x=n=>r.includes(n),[j,b]=m.useState([]),g=n=>{const i=n;return r.includes(i)?d([...r].filter(p=>p!==i)):d([...r,i])},w=n=>{const i=n;return d([...r].filter(p=>p!==i))};return m.useEffect(()=>{u(f),b(r)},[f,r]),m.useEffect(()=>{o(r)},[r,o]),t.jsxs("div",{className:"not-prose",children:[t.jsx(S.Root,{show:a,as:m.Fragment,children:t.jsxs(X,{as:"div",className:"relative z-40 sm:hidden",onClose:l,children:[t.jsx(S.Child,{as:m.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),t.jsx("div",{className:"fixed inset-0 z-40 flex",children:t.jsx(S.Child,{as:m.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:t.jsxs(X.Panel,{className:"relative ml-auto flex h-full w-full max-w-xs flex-col overflow-y-auto bg-white shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between bg-cu-black-50 px-4 py-3",children:[t.jsx("h2",{className:"text-base font-medium text-cu-black-800",children:"Filters"}),t.jsxs("button",{type:"button",className:"-mr-1 flex h-8 w-8 items-center justify-center rounded-md bg-white p-2 text-cu-black-600",onClick:()=>l(!1),children:[t.jsx("span",{className:"sr-only",children:"Close menu"}),t.jsx(oe,{className:"h-6 w-6","aria-hidden":"true"})]})]}),t.jsx("form",{children:c.map(n=>t.jsx(V,{as:"div",className:"border-t border-cu-black-100 px-4 py-6",children:({open:i})=>t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"group -mx-2 -my-3 flow-root",children:t.jsxs(V.Button,{className:"flex w-full items-center justify-between bg-white px-2 py-3 text-sm text-cu-black-300 group-hover:text-cu-black-600",children:[t.jsx("span",{className:"font-medium text-cu-black-600",children:n.name}),t.jsx("span",{className:"ml-6 flex items-center",children:t.jsx(Q,{className:Y(i?"-rotate-180":"rotate-0","h-5 w-5 transform"),"aria-hidden":"true"})})]})}),t.jsx(V.Panel,{className:"pt-6",children:t.jsx("div",{className:"space-y-6",children:n.options.map((p,y)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{id:`filter-mobile-${n.id}-${y}`,name:`${n.id}[]`,defaultValue:p.label,type:"checkbox",onChange:()=>g(p.label),defaultChecked:x(p.label),className:"h-4 w-4 rounded border-cu-black-200 text-cu-red focus:ring-cu-red-100"}),t.jsx("label",{htmlFor:`filter-mobile-${n.id}-${y}`,className:"ml-3 text-sm text-cu-black-600",children:p.label})]},y))})})]})},n.name))})]})})})]})}),t.jsxs("section",{"aria-labelledby":"filter-heading",children:[t.jsx("h2",{id:"filter-heading",className:"sr-only",children:"Filters"}),t.jsx("div",{className:"rounded-tl-lg rounded-tr-lg border border-cu-black-100 bg-gray-50 py-4",children:t.jsxs("div",{className:"flex justify-between px-4 sm:px-6",children:[t.jsxs(P,{as:"div",className:"relative",children:[e&&(e==null?void 0:e.length)>0&&t.jsx("div",{children:t.jsxs(P.Button,{className:M.dropDownTitles,children:["Sort",t.jsx(Q,{className:M.chevron,"aria-hidden":"true"})]})}),t.jsx(S,{as:m.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:t.jsx(P.Items,{className:"absolute -left-4 z-10 mt-2 w-40 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e&&(e==null?void 0:e.length)>0&&t.jsx("div",{className:"py-1",children:e.map(n=>t.jsx(P.Item,{children:({active:i})=>t.jsx(ce,{href:n.href,className:Y(n.name===f?"font-medium text-cu-black-800":"text-cu-black-600",i?"bg-gray-100":"","block px-4 py-2 text-sm")})},n.name))})})})]}),t.jsx("button",{type:"button",className:"inline-block text-sm font-medium text-cu-black-800 hover:text-cu-red sm:hidden",onClick:()=>l(!0),children:"Filters"}),t.jsx("div",{className:"hidden sm:block",children:t.jsx("div",{className:"flow-root",children:t.jsx(C.Group,{className:"-mx-4 flex items-center divide-x divide-gray-200",children:c.map((n,i)=>t.jsxs(C,{className:"relative inline-block px-4 text-left",children:[t.jsxs(C.Button,{className:M.dropDownTitles,children:[t.jsx("span",{children:n.name}),t.jsx(Q,{className:M.chevron,"aria-hidden":"true"})]}),t.jsx(S,{as:m.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:t.jsx(C.Panel,{className:"absolute right-0 z-10 mt-2 rounded-md bg-white p-4 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:t.jsx("form",{className:"space-y-4",children:n.options.map((p,y)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{id:`filter-${n.id}-${y}`,name:`${n.id}[]`,defaultValue:p.label,type:"checkbox",onChange:()=>g(p.label),defaultChecked:x(p.label),className:"h-4 w-4 rounded border-cu-black-200 text-cu-red focus:ring-cu-red-100"}),t.jsx("label",{htmlFor:`filter-${n.id}-${y}`,className:"ml-3 whitespace-nowrap pr-6 text-sm text-cu-black-600",children:p.label})]},y))})})})]},i))})})})]})}),t.jsx("div",{className:"rounded-bl-lg rounded-br-lg border border-t-0 border-cu-black-100 bg-white",children:t.jsxs("div",{className:"px-4 py-3 sm:flex sm:items-center sm:px-6",children:[t.jsxs("h3",{className:"py-1 text-sm text-cu-black-600",children:["Filters",t.jsx("span",{className:"sr-only",children:", active"})]}),t.jsx("div",{"aria-hidden":"true",className:"hidden h-5 w-px bg-gray-300 sm:ml-4 sm:block"}),t.jsx("div",{className:"mt-4 sm:ml-4 sm:mt-0",children:t.jsx("div",{className:"-m-1 flex flex-wrap items-center gap-3",children:j.map((n,i)=>t.jsxs("span",{className:"inline-flex items-center rounded-lg border border-cu-black-100 bg-white py-1 pl-3 pr-2 text-sm text-cu-black-600",children:[t.jsx("span",{children:n}),t.jsxs("button",{type:"button",onClick:()=>w(n),className:"ml-1 inline-flex h-4 w-4 flex-shrink-0 rounded-full p-1 text-cu-black-400 hover:bg-cu-red hover:text-white",children:[t.jsxs("span",{className:"sr-only",children:["Remove filter for ",n]}),t.jsx("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:t.jsx("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})]})]},i))})})]})})]})]})};try{D.displayName="Filter",D.__docgenInfo={description:"",displayName:"Filter",props:{sortOptions:{defaultValue:null,description:"",name:"sortOptions",required:!1,type:{name:"{ name: string; href: string; current: boolean; }[]"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"{ id: string; name: string; options: { value: string; label: string; checked: boolean; }[]; }[]"}},callback:{defaultValue:null,description:"",name:"callback",required:!0,type:{name:"(k: string[]) => void"}}}}}catch{}const K={title:"Filter",classname:".filter",sortOptions:[{name:"Daily",href:"#",current:!1},{name:"Weekly",href:"#",current:!1},{name:"Monthly",href:"#",current:!1}],filters:[{id:"audience",name:"Audience",options:[{value:"staff",label:"Staff",checked:!1},{value:"student",label:"Student",checked:!1}]},{id:"tags",name:"Tags",options:[{value:"general",label:"General",checked:!1},{value:"online/virtual",label:"Online/Virtual",checked:!1},{value:"finances",label:"Finances",checked:!1},{value:"healthyworkplace",label:"Healthy Workplace",checked:!1}]}]},lt={title:"Components/Filter",component:D,tags:["autodocs"],parameters:{controls:{sort:"requiredFirst"}}},F=()=>t.jsx(D,{filters:K.filters,callback:()=>{},sortOptions:K.sortOptions}),R=()=>t.jsx(D,{filters:K.filters,callback:()=>{}});F.storyName="With Sorting";R.storyName="Without Sorting";var Z,ee,te;F.parameters={...F.parameters,docs:{...(Z=F.parameters)==null?void 0:Z.docs,source:{originalSource:`() => {
  return <Filter filters={FilterData.filters} callback={() => undefined} sortOptions={FilterData.sortOptions} />;
}`,...(te=(ee=F.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var re,ae,se;R.parameters={...R.parameters,docs:{...(re=R.parameters)==null?void 0:re.docs,source:{originalSource:`() => {
  return <Filter filters={FilterData.filters} callback={() => undefined} />;
}`,...(se=(ae=R.parameters)==null?void 0:ae.docs)==null?void 0:se.source}}};const it=["Default","NoSorting"];export{F as Default,R as NoSorting,it as __namedExportsOrder,lt as default};
//# sourceMappingURL=Filter.stories-8fdcab9f.js.map
