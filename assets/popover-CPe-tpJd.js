import{n as ne,T as X,s as ee,u as me,a as xe,b as ie,e as Ce,E as Fe,F as we,v as Be,y as ke,$ as Me,c as Re,w as Oe,d as _e,x as De,R as He,f as Le,g as Ne,P as V,h as H,i as Ge,t as Ae,A as Ve,j as je,o as A,r as be,k as ue}from"./portal-CEIcDvDm.js";import{r as a,R as b}from"./index-BwDkhjyp.js";import{o as I,M as te,W as Q,y as W,T as Ke,s as ve,c as Ue,b as j,i as Z,H as z,D as se,u as Pe,V as Se,A as ye,I as qe,n as Je,a as We,d as Ze}from"./use-server-handoff-complete-BHJL6XQy.js";let Qe=a.createContext(()=>{});function Ye({value:e,children:o}){return b.createElement(Qe.Provider,{value:e},o)}function ze({defaultContainers:e=[],portals:o,mainTreeNode:i}={}){let y=ne(i),p=I(()=>{var d,v;let u=[];for(let l of e)l!==null&&(l instanceof HTMLElement?u.push(l):"current"in l&&l.current instanceof HTMLElement&&u.push(l.current));if(o!=null&&o.current)for(let l of o.current)u.push(l);for(let l of(d=y==null?void 0:y.querySelectorAll("html > *, body > *"))!=null?d:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(i&&(l.contains(i)||l.contains((v=i==null?void 0:i.getRootNode())==null?void 0:v.host))||u.some(g=>l.contains(g))||u.push(l));return u});return{resolveContainers:p,contains:I(d=>p().some(v=>v.contains(d)))}}let Ee=a.createContext(null);function $e({children:e,node:o}){let[i,y]=a.useState(null),p=ge(o??i);return b.createElement(Ee.Provider,{value:p},e,p===null&&b.createElement(X,{features:ee.Hidden,ref:d=>{var v,u;if(d){for(let l of(u=(v=me(d))==null?void 0:v.querySelectorAll("html > *, body > *"))!=null?u:[])if(l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l!=null&&l.contains(d)){y(l);break}}}}))}function ge(e=null){var o;return(o=a.useContext(Ee))!=null?o:e}var D=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(D||{});function he(){let e=a.useRef(0);return xe(!0,"keydown",o=>{o.key==="Tab"&&(e.current=o.shiftKey?1:0)},!0),e}var Xe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Xe||{}),et=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(et||{});let tt={0:e=>({...e,popoverState:j(e.popoverState,{0:1,1:0}),__demoMode:!1}),1(e){return e.popoverState===1?e:{...e,popoverState:1,__demoMode:!1}},2(e,o){return e.button===o.button?e:{...e,button:o.button}},3(e,o){return e.buttonId===o.buttonId?e:{...e,buttonId:o.buttonId}},4(e,o){return e.panel===o.panel?e:{...e,panel:o.panel}},5(e,o){return e.panelId===o.panelId?e:{...e,panelId:o.panelId}}},ce=a.createContext(null);ce.displayName="PopoverContext";function re(e){let o=a.useContext(ce);if(o===null){let i=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,re),i}return o}let oe=a.createContext(null);oe.displayName="PopoverAPIContext";function pe(e){let o=a.useContext(oe);if(o===null){let i=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,pe),i}return o}let de=a.createContext(null);de.displayName="PopoverGroupContext";function Ie(){return a.useContext(de)}let le=a.createContext(null);le.displayName="PopoverPanelContext";function nt(){return a.useContext(le)}function rt(e,o){return j(o.type,tt,e,o)}let ot="div";function lt(e,o){var i;let{__demoMode:y=!1,...p}=e,d=a.useRef(null),v=W(o,Ke(n=>{d.current=n})),u=a.useRef([]),l=a.useReducer(rt,{__demoMode:y,popoverState:y?0:1,buttons:u,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:a.createRef(),afterPanelSentinel:a.createRef(),afterButtonSentinel:a.createRef()}),[{popoverState:g,button:t,buttonId:h,panel:P,panelId:T,beforePanelSentinel:f,afterPanelSentinel:m,afterButtonSentinel:c},E]=l,x=ne((i=d.current)!=null?i:t),B=a.useMemo(()=>{if(!t||!P)return!1;for(let $ of document.querySelectorAll("body > *"))if(Number($==null?void 0:$.contains(t))^Number($==null?void 0:$.contains(P)))return!0;let n=ie(),r=n.indexOf(t),s=(r+n.length-1)%n.length,S=(r+1)%n.length,C=n[s],k=n[S];return!P.contains(C)&&!P.contains(k)},[t,P]),K=ve(h),L=ve(T),F=a.useMemo(()=>({buttonId:K,panelId:L,close:()=>E({type:1})}),[K,L,E]),M=Ie(),R=M==null?void 0:M.registerPopover,w=I(()=>{var n;return(n=M==null?void 0:M.isFocusWithinPopoverGroup())!=null?n:(x==null?void 0:x.activeElement)&&((t==null?void 0:t.contains(x.activeElement))||(P==null?void 0:P.contains(x.activeElement)))});a.useEffect(()=>R==null?void 0:R(F),[R,F]);let[U,q]=Ce(),N=ge(t),O=ze({mainTreeNode:N,portals:U,defaultContainers:[t,P]});Fe(x==null?void 0:x.defaultView,"focus",n=>{var r,s,S,C,k,$;n.target!==window&&n.target instanceof HTMLElement&&g===0&&(w()||t&&P&&(O.contains(n.target)||(s=(r=f.current)==null?void 0:r.contains)!=null&&s.call(r,n.target)||(C=(S=m.current)==null?void 0:S.contains)!=null&&C.call(S,n.target)||($=(k=c.current)==null?void 0:k.contains)!=null&&$.call(k,n.target)||E({type:1})))},!0),we(g===0,O.resolveContainers,(n,r)=>{E({type:1}),Ve(r,je.Loose)||(n.preventDefault(),t==null||t.focus())});let _=I(n=>{E({type:1});let r=n?n instanceof HTMLElement?n:"current"in n&&n.current instanceof HTMLElement?n.current:t:t;r==null||r.focus()}),G=a.useMemo(()=>({close:_,isPortalled:B}),[_,B]),Y=a.useMemo(()=>({open:g===0,close:_}),[g,_]),J={ref:v};return b.createElement($e,{node:N},b.createElement(Be,null,b.createElement(le.Provider,{value:null},b.createElement(ce.Provider,{value:l},b.createElement(oe.Provider,{value:G},b.createElement(Ye,{value:_},b.createElement(Ue,{value:j(g,{0:Z.Open,1:Z.Closed})},b.createElement(q,null,z({ourProps:J,theirProps:p,slot:Y,defaultTag:ot,name:"Popover"})))))))))}let at="button";function ut(e,o){let i=a.useId(),{id:y=`headlessui-popover-button-${i}`,disabled:p=!1,autoFocus:d=!1,...v}=e,[u,l]=re("Popover.Button"),{isPortalled:g}=pe("Popover.Button"),t=a.useRef(null),h=`headlessui-focus-sentinel-${a.useId()}`,P=Ie(),T=P==null?void 0:P.closeOthers,f=nt()!==null;a.useEffect(()=>{if(!f)return l({type:3,buttonId:y}),()=>{l({type:3,buttonId:null})}},[f,y,l]);let[m]=a.useState(()=>Symbol()),c=W(t,o,ke(),f?null:r=>{if(r)u.buttons.current.push(m);else{let s=u.buttons.current.indexOf(m);s!==-1&&u.buttons.current.splice(s,1)}u.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),r&&l({type:2,button:r})}),E=W(t,o),x=ne(t),B=I(r=>{var s,S,C;if(f){if(u.popoverState===1)return;switch(r.key){case A.Space:case A.Enter:r.preventDefault(),(S=(s=r.target).click)==null||S.call(s),l({type:1}),(C=u.button)==null||C.focus();break}}else switch(r.key){case A.Space:case A.Enter:r.preventDefault(),r.stopPropagation(),u.popoverState===1&&(T==null||T(u.buttonId)),l({type:0});break;case A.Escape:if(u.popoverState!==0)return T==null?void 0:T(u.buttonId);if(!t.current||x!=null&&x.activeElement&&!t.current.contains(x.activeElement))return;r.preventDefault(),r.stopPropagation(),l({type:1});break}}),K=I(r=>{f||r.key===A.Space&&r.preventDefault()}),L=I(r=>{var s,S;be(r.currentTarget)||p||(f?(l({type:1}),(s=u.button)==null||s.focus()):(r.preventDefault(),r.stopPropagation(),u.popoverState===1&&(T==null||T(u.buttonId)),l({type:0}),(S=u.button)==null||S.focus()))}),F=I(r=>{r.preventDefault(),r.stopPropagation()}),{isFocusVisible:M,focusProps:R}=Me({autoFocus:d}),{isHovered:w,hoverProps:U}=Re({isDisabled:p}),{pressed:q,pressProps:N}=Oe({disabled:p}),O=u.popoverState===0,_=a.useMemo(()=>({open:O,active:q||O,disabled:p,hover:w,focus:M,autofocus:d}),[O,w,M,q,p,d]),G=_e(e,t),Y=f?se({ref:E,type:G,onKeyDown:B,onClick:L,disabled:p||void 0,autoFocus:d},R,U,N):se({ref:c,id:u.buttonId,type:G,"aria-expanded":u.popoverState===0,"aria-controls":u.panel?u.panelId:void 0,disabled:p||void 0,autoFocus:d,onKeyDown:B,onKeyUp:K,onClick:L,onMouseDown:F},R,U,N),J=he(),n=I(()=>{let r=u.panel;if(!r)return;function s(){j(J.current,{[D.Forwards]:()=>V(r,H.First),[D.Backwards]:()=>V(r,H.Last)})===ue.Error&&V(ie().filter(S=>S.dataset.headlessuiFocusGuard!=="true"),j(J.current,{[D.Forwards]:H.Next,[D.Backwards]:H.Previous}),{relativeTo:u.button})}s()});return b.createElement(b.Fragment,null,z({ourProps:Y,theirProps:v,slot:_,defaultTag:at,name:"Popover.Button"}),O&&!f&&g&&b.createElement(X,{id:h,ref:u.afterButtonSentinel,features:ee.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:n}))}let st="div",it=te.RenderStrategy|te.Static;function Te(e,o){let i=a.useId(),{id:y=`headlessui-popover-backdrop-${i}`,transition:p=!1,...d}=e,[{popoverState:v},u]=re("Popover.Backdrop"),l=a.useRef(null),g=W(o,l),t=Pe(),[h,P]=Se(p,l,t!==null?(t&Z.Open)===Z.Open:v===0),T=I(c=>{if(be(c.currentTarget))return c.preventDefault();u({type:1})}),f=a.useMemo(()=>({open:v===0}),[v]),m={ref:g,id:y,"aria-hidden":!0,onClick:T,...ye(P)};return z({ourProps:m,theirProps:d,slot:f,defaultTag:st,features:it,visible:h,name:"Popover.Backdrop"})}let ct="div",pt=te.RenderStrategy|te.Static;function dt(e,o){let i=a.useId(),{id:y=`headlessui-popover-panel-${i}`,focus:p=!1,anchor:d,portal:v=!1,modal:u=!1,transition:l=!1,...g}=e,[t,h]=re("Popover.Panel"),{close:P,isPortalled:T}=pe("Popover.Panel"),f=`headlessui-focus-sentinel-before-${i}`,m=`headlessui-focus-sentinel-after-${i}`,c=a.useRef(null),E=De(d),[x,B]=He(E),K=Le();E&&(v=!0);let L=W(c,o,E?x:null,n=>{h({type:4,panel:n})}),F=ne(c),M=qe();Je(()=>(h({type:5,panelId:y}),()=>{h({type:5,panelId:null})}),[y,h]);let R=Pe(),[w,U]=Se(l,c,R!==null?(R&Z.Open)===Z.Open:t.popoverState===0);We(w,t.button,()=>{h({type:1})});let q=t.__demoMode?!1:u&&w;Ne(q,F);let N=I(n=>{var r;switch(n.key){case A.Escape:if(t.popoverState!==0||!c.current||F!=null&&F.activeElement&&!c.current.contains(F.activeElement))return;n.preventDefault(),n.stopPropagation(),h({type:1}),(r=t.button)==null||r.focus();break}});a.useEffect(()=>{var n;e.static||t.popoverState===1&&((n=e.unmount)==null||n)&&h({type:4,panel:null})},[t.popoverState,e.unmount,e.static,h]),a.useEffect(()=>{if(t.__demoMode||!p||t.popoverState!==0||!c.current)return;let n=F==null?void 0:F.activeElement;c.current.contains(n)||V(c.current,H.First)},[t.__demoMode,p,c.current,t.popoverState]);let O=a.useMemo(()=>({open:t.popoverState===0,close:P}),[t.popoverState,P]),_=se(E?K():{},{ref:L,id:y,onKeyDown:N,onBlur:p&&t.popoverState===0?n=>{var r,s,S,C,k;let $=n.relatedTarget;$&&c.current&&((r=c.current)!=null&&r.contains($)||(h({type:1}),((S=(s=t.beforePanelSentinel.current)==null?void 0:s.contains)!=null&&S.call(s,$)||(k=(C=t.afterPanelSentinel.current)==null?void 0:C.contains)!=null&&k.call(C,$))&&$.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...g.style,...B,"--button-width":Ge(t.button,!0).width},...ye(U)}),G=he(),Y=I(()=>{let n=c.current;if(!n)return;function r(){j(G.current,{[D.Forwards]:()=>{var s;V(n,H.First)===ue.Error&&((s=t.afterPanelSentinel.current)==null||s.focus())},[D.Backwards]:()=>{var s;(s=t.button)==null||s.focus({preventScroll:!0})}})}r()}),J=I(()=>{let n=c.current;if(!n)return;function r(){j(G.current,{[D.Forwards]:()=>{var s;if(!t.button)return;let S=ie(),C=S.indexOf(t.button),k=S.slice(0,C+1),$=[...S.slice(C+1),...k];for(let ae of $.slice())if(ae.dataset.headlessuiFocusGuard==="true"||(s=t.panel)!=null&&s.contains(ae)){let fe=$.indexOf(ae);fe!==-1&&$.splice(fe,1)}V($,H.First,{sorted:!1})},[D.Backwards]:()=>{var s;V(n,H.Previous)===ue.Error&&((s=t.button)==null||s.focus())}})}r()});return b.createElement(Ze,null,b.createElement(le.Provider,{value:y},b.createElement(oe.Provider,{value:{close:P,isPortalled:T}},b.createElement(Ae,{enabled:v?e.static||w:!1},w&&T&&b.createElement(X,{id:f,ref:t.beforePanelSentinel,features:ee.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Y}),z({mergeRefs:M,ourProps:_,theirProps:g,slot:O,defaultTag:ct,features:pt,visible:w,name:"Popover.Panel"}),w&&T&&b.createElement(X,{id:m,ref:t.afterPanelSentinel,features:ee.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:J})))))}let ft="div";function vt(e,o){let i=a.useRef(null),y=W(i,o),[p,d]=a.useState([]),v=I(f=>{d(m=>{let c=m.indexOf(f);if(c!==-1){let E=m.slice();return E.splice(c,1),E}return m})}),u=I(f=>(d(m=>[...m,f]),()=>v(f))),l=I(()=>{var f;let m=me(i);if(!m)return!1;let c=m.activeElement;return(f=i.current)!=null&&f.contains(c)?!0:p.some(E=>{var x,B;return((x=m.getElementById(E.buttonId.current))==null?void 0:x.contains(c))||((B=m.getElementById(E.panelId.current))==null?void 0:B.contains(c))})}),g=I(f=>{for(let m of p)m.buttonId.current!==f&&m.close()}),t=a.useMemo(()=>({registerPopover:u,unregisterPopover:v,isFocusWithinPopoverGroup:l,closeOthers:g}),[u,v,l,g]),h=a.useMemo(()=>({}),[]),P=e,T={ref:y};return b.createElement($e,null,b.createElement(de.Provider,{value:t},z({ourProps:T,theirProps:P,slot:h,defaultTag:ft,name:"Popover.Group"})))}let mt=Q(lt),bt=Q(ut),Pt=Q(Te),St=Q(Te),yt=Q(dt),Et=Q(vt),It=Object.assign(mt,{Button:bt,Backdrop:St,Overlay:Pt,Panel:yt,Group:Et});export{yt as B,$e as O,ze as R,bt as S,D as a,ge as b,Ye as c,Et as d,It as l,he as u};
