import{j as d}from"./jsx-runtime-daf202a7.js";import{r as S}from"./index-ec8b93d8.js";import{p as X}from"./index-58d3fd43.js";import{c as E}from"./_commonjsHelpers-042e6b4d.js";import{W as M}from"./combobox-b5286f3e.js";import{M as H}from"./MagnifyingGlassIcon-6a66de15.js";import{X as J}from"./XMarkIcon-81eef1c8.js";var w={},B={},z="Expected a function",q=0/0,Q="[object Symbol]",Y=/^\s+|\s+$/g,Z=/^[-+]0x[0-9a-f]+$/i,ee=/^0b[01]+$/i,te=/^0o[0-7]+$/i,ne=parseInt,oe=typeof E=="object"&&E&&E.Object===Object&&E,re=typeof self=="object"&&self&&self.Object===Object&&self,ae=oe||re||Function("return this")(),ie=Object.prototype,se=ie.toString,ue=Math.max,ce=Math.min,D=function(){return ae.Date.now()};function le(n,o,a){var e,t,r,s,i,l,h=0,_=!1,g=!1,P=!0;if(typeof n!="function")throw new TypeError(z);o=F(o)||0,N(a)&&(_=!!a.leading,g="maxWait"in a,r=g?ue(F(a.maxWait)||0,o):r,P="trailing"in a?!!a.trailing:P);function I(c){var y=e,A=t;return e=t=void 0,h=c,s=n.apply(A,y),s}function T(c){return h=c,i=setTimeout(f,o),_?I(c):s}function k(c){var y=c-l,A=c-h,V=o-y;return g?ce(V,r-A):V}function v(c){var y=c-l,A=c-h;return l===void 0||y>=o||y<0||g&&A>=r}function f(){var c=D();if(v(c))return p(c);i=setTimeout(f,k(c))}function p(c){return i=void 0,P&&e?I(c):(e=t=void 0,s)}function b(){i!==void 0&&clearTimeout(i),h=0,e=l=t=i=void 0}function C(){return i===void 0?s:p(D())}function L(){var c=D(),y=v(c);if(e=arguments,t=this,l=c,y){if(i===void 0)return T(l);if(g)return i=setTimeout(f,o),I(l)}return i===void 0&&(i=setTimeout(f,o)),s}return L.cancel=b,L.flush=C,L}function N(n){var o=typeof n;return!!n&&(o=="object"||o=="function")}function de(n){return!!n&&typeof n=="object"}function ge(n){return typeof n=="symbol"||de(n)&&se.call(n)==Q}function F(n){if(typeof n=="number")return n;if(ge(n))return q;if(N(n)){var o=typeof n.valueOf=="function"?n.valueOf():n;n=N(o)?o+"":o}if(typeof n!="string")return n===0?n:+n;n=n.replace(Y,"");var a=ee.test(n);return a||te.test(n)?ne(n.slice(2),a?2:8):Z.test(n)?q:+n}var fe=le,j={};Object.defineProperty(j,"__esModule",{value:!0});j.compose=function(){for(var o=arguments.length,a=Array(o),e=0;e<o;e++)a[e]=arguments[e];return function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];a.forEach(function(i){return i&&i.apply(void 0,r)})}};j.pick=function(o){for(var a=arguments.length,e=Array(a>1?a-1:0),t=1;t<a;t++)e[t-1]=arguments[t];return e.reduce(function(r,s){return o&&o.hasOwnProperty(s)&&(r[s]=o[s]),r},{})};Object.defineProperty(B,"__esModule",{value:!0});var x=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},pe=function(){function n(o,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}return function(o,a,e){return a&&n(o.prototype,a),e&&n(o,e),o}}(),me=S,he=K(me),ve=X,u=K(ve),be=fe,ye=K(be),m=j;function K(n){return n&&n.__esModule?n:{default:n}}function Se(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function we(n,o){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:n}function Ie(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(n,o):n.__proto__=o)}var xe=function(o){return{mainText:o.main_text,secondaryText:o.secondary_text}},U=function(n){Ie(o,n);function o(a){Se(this,o);var e=we(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,a));return e.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");e.autocompleteService=new window.google.maps.places.AutocompleteService,e.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,e.setState(function(t){return t.ready?null:{ready:!0}})},e.autocompleteCallback=function(t,r){if(e.setState({loading:!1}),r!==e.autocompleteOK){e.props.onError(r,e.clearSuggestions);return}var s=e.props.highlightFirstSuggestion;e.setState({suggestions:t.map(function(i,l){return{id:i.id,description:i.description,placeId:i.place_id,active:!!(s&&l===0),index:l,formattedSuggestion:xe(i.structured_formatting),matchedSubstrings:i.matched_substrings,terms:i.terms,types:i.types}})})},e.fetchPredictions=function(){var t=e.props.value;t.length&&(e.setState({loading:!0}),e.autocompleteService.getPlacePredictions(x({},e.props.searchOptions,{input:t}),e.autocompleteCallback))},e.clearSuggestions=function(){e.setState({suggestions:[]})},e.clearActive=function(){e.setState({suggestions:e.state.suggestions.map(function(t){return x({},t,{active:!1})})})},e.handleSelect=function(t,r,s){e.clearSuggestions(),e.props.onSelect?e.props.onSelect(t,r,s):e.props.onChange(t)},e.getActiveSuggestion=function(){return e.state.suggestions.find(function(t){return t.active})},e.selectActiveAtIndex=function(t){var r=e.state.suggestions.find(function(s){return s.index===t}).description;e.setActiveAtIndex(t),e.props.onChange(r)},e.selectUserInputValue=function(){e.clearActive(),e.props.onChange(e.state.userInputValue)},e.handleEnterKey=function(){var t=e.getActiveSuggestion();t===void 0?e.handleSelect(e.props.value,null,null):e.handleSelect(t.description,t.placeId,t)},e.handleDownKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(0):t.index===e.state.suggestions.length-1?e.selectUserInputValue():e.selectActiveAtIndex(t.index+1)}},e.handleUpKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(e.state.suggestions.length-1):t.index===0?e.selectUserInputValue():e.selectActiveAtIndex(t.index-1)}},e.handleInputKeyDown=function(t){switch(t.key){case"Enter":t.preventDefault(),e.handleEnterKey();break;case"ArrowDown":t.preventDefault(),e.handleDownKey();break;case"ArrowUp":t.preventDefault(),e.handleUpKey();break;case"Escape":e.clearSuggestions();break}},e.setActiveAtIndex=function(t){e.setState({suggestions:e.state.suggestions.map(function(r,s){return s===t?x({},r,{active:!0}):x({},r,{active:!1})})})},e.handleInputChange=function(t){var r=t.target.value;if(e.props.onChange(r),e.setState({userInputValue:r}),!r){e.clearSuggestions();return}e.props.shouldFetchSuggestions&&e.debouncedFetchPredictions()},e.handleInputOnBlur=function(){e.mousedownOnSuggestion||e.clearSuggestions()},e.getActiveSuggestionId=function(){var t=e.getActiveSuggestion();return t?"PlacesAutocomplete__suggestion-"+t.placeId:void 0},e.getIsExpanded=function(){return e.state.suggestions.length>0},e.getInputProps=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(t.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var r={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":e.getIsExpanded(),"aria-activedescendant":e.getActiveSuggestionId(),disabled:!e.state.ready};return x({},r,t,{onKeyDown:(0,m.compose)(e.handleInputKeyDown,t.onKeyDown),onBlur:(0,m.compose)(e.handleInputOnBlur,t.onBlur),value:e.props.value,onChange:function(i){e.handleInputChange(i)}})},e.getSuggestionItemProps=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=e.handleSuggestionMouseEnter.bind(e,t.index),i=e.handleSuggestionClick.bind(e,t);return x({},r,{key:t.id,id:e.getActiveSuggestionId(),role:"option",onMouseEnter:(0,m.compose)(s,r.onMouseEnter),onMouseLeave:(0,m.compose)(e.handleSuggestionMouseLeave,r.onMouseLeave),onMouseDown:(0,m.compose)(e.handleSuggestionMouseDown,r.onMouseDown),onMouseUp:(0,m.compose)(e.handleSuggestionMouseUp,r.onMouseUp),onTouchStart:(0,m.compose)(e.handleSuggestionTouchStart,r.onTouchStart),onTouchEnd:(0,m.compose)(e.handleSuggestionMouseUp,r.onTouchEnd),onClick:(0,m.compose)(i,r.onClick)})},e.handleSuggestionMouseEnter=function(t){e.setActiveAtIndex(t)},e.handleSuggestionMouseLeave=function(){e.mousedownOnSuggestion=!1,e.clearActive()},e.handleSuggestionMouseDown=function(t){t.preventDefault(),e.mousedownOnSuggestion=!0},e.handleSuggestionTouchStart=function(){e.mousedownOnSuggestion=!0},e.handleSuggestionMouseUp=function(){e.mousedownOnSuggestion=!1},e.handleSuggestionClick=function(t,r){r&&r.preventDefault&&r.preventDefault();var s=t.description,i=t.placeId;e.handleSelect(s,i,t),setTimeout(function(){e.mousedownOnSuggestion=!1})},e.state={loading:!1,suggestions:[],userInputValue:a.value,ready:!a.googleCallbackName},e.debouncedFetchPredictions=(0,ye.default)(e.fetchPredictions,a.debounce),e}return pe(o,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;if(e){var t=window.google&&window.google.maps&&window.google.maps.places;t?this.init():window[e]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),o}(he.default.Component);U.propTypes={onChange:u.default.func.isRequired,value:u.default.string.isRequired,children:u.default.func.isRequired,onError:u.default.func,onSelect:u.default.func,searchOptions:u.default.shape({bounds:u.default.object,componentRestrictions:u.default.object,location:u.default.object,offset:u.default.oneOfType([u.default.number,u.default.string]),radius:u.default.oneOfType([u.default.number,u.default.string]),types:u.default.array}),debounce:u.default.number,highlightFirstSuggestion:u.default.bool,shouldFetchSuggestions:u.default.bool,googleCallbackName:u.default.string};U.defaultProps={onError:function(o,a){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,o)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};B.default=U;var O={};Object.defineProperty(O,"__esModule",{value:!0});O.geocodeByAddress=function(o){var a=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,r){a.geocode({address:o},function(s,i){i!==e&&r(i),t(s)})})};O.getLatLng=function(o){return new Promise(function(a,e){try{var t={lat:o.geometry.location.lat(),lng:o.geometry.location.lng()};a(t)}catch(r){e(r)}})};O.geocodeByPlaceId=function(o){var a=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,r){a.geocode({placeId:o},function(s,i){i!==e&&r(i),t(s)})})};Object.defineProperty(w,"__esModule",{value:!0});var W=w.getLatLng=w.geocodeByPlaceId=$=w.geocodeByAddress=void 0,Pe=B,Ae=Oe(Pe),R=O;function Oe(n){return n&&n.__esModule?n:{default:n}}var $=w.geocodeByAddress=R.geocodeByAddress;w.geocodeByPlaceId=R.geocodeByPlaceId;W=w.getLatLng=R.getLatLng;var _e=w.default=Ae.default;const G=({posCallback:n,centerCallback:o,singleMarker:a,singleMarkerCallback:e,eventAddress:t,eventLatitude:r,eventLongitude:s})=>{const[i,l]=S.useState(t||""),[h,_]=S.useState({lat:45.3850225,lng:-75.6946679}),[g,P]=S.useState([]),[I,T]=S.useState({lat:r||45.3850225,lng:s||-75.6946679}),k=async v=>{const f=await $(v),p=await W(f[0]),b=f[0].place_id;l(v),_({lat:p.lat,lng:p.lng}),P([...g,{name:v,id:b,position:p}]),T(p)};return S.useEffect(()=>{n&&n(g)},[g,n]),S.useEffect(()=>{o&&o(h)},[h,o]),S.useEffect(()=>{a&&e&&e({coordinates:I,address:i})},[I,e,a]),d.jsx("div",{className:"not-prose",children:d.jsx(_e,{value:i,onChange:l,onSelect:k,children:({getInputProps:v,suggestions:f,getSuggestionItemProps:p})=>d.jsxs(M,{value:i,onChange:k,children:[d.jsxs("div",{className:"relative",children:[d.jsx(H,{className:"pointer-events-none absolute left-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true"}),d.jsx(M.Input,{className:"h-12 w-full rounded-lg border border-cu-black-200 bg-white pl-10 pr-4 text-cu-black-800 placeholder-cu-black-400 focus:border-cu-black-400 focus:outline-none focus:ring-0 sm:text-sm",...v({placeholder:"Type address"})}),i&&d.jsx(J,{className:"absolute right-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true",onClick:()=>{l("")}})]}),d.jsx(M.Options,{className:"mt-3 max-h-80 divide-y divide-cu-black-100 overflow-y-auto bg-white px-1.5 text-sm text-cu-black-800",children:f.map(b=>d.jsx(M.Option,{value:b,children:({active:C})=>d.jsx("ul",{children:d.jsx("li",{...p(b),className:`p-4 text-cu-black-600 hover:cursor-pointer ${C?"bg-cu-black-50 text-cu-black-900":"bg-white"}`,children:b.description})})},b.index))})]})})})};try{G.displayName="LocationPicker",G.__docgenInfo={description:"",displayName:"LocationPicker",props:{posCallback:{defaultValue:null,description:"",name:"posCallback",required:!1,type:{name:"((pos: { name: string; id: string; position: object; }[]) => void)"}},centerCallback:{defaultValue:null,description:"",name:"centerCallback",required:!1,type:{name:"((center: { lat: number; lng: number; }) => void)"}},singleMarker:{defaultValue:null,description:"",name:"singleMarker",required:!1,type:{name:"boolean"}},singleMarkerCallback:{defaultValue:null,description:"",name:"singleMarkerCallback",required:!1,type:{name:"((marker: { coordinates: { lat: number; lng: number; }; address: string; }) => void)"}},eventLatitude:{defaultValue:null,description:"",name:"eventLatitude",required:!1,type:{name:"number"}},eventLongitude:{defaultValue:null,description:"",name:"eventLongitude",required:!1,type:{name:"number"}},eventAddress:{defaultValue:null,description:"",name:"eventAddress",required:!1,type:{name:"string"}}}}}catch{}export{G as L};
//# sourceMappingURL=LocationPicker-d958cc09.js.map
