import{r as i,R as b}from"./index-580b8df0.js";import{l as _,u as $,m as J,p as X,s as L,j as de,L as K,y as Y,w as R,a as Z,o as x,b as fe,e as ve,c as me,d as w,D as ee,C as re}from"./open-closed-6ab898d8.js";function te(){let r=i.useRef(!1);return _(()=>(r.current=!0,()=>{r.current=!1}),[]),r}function he(r=0){let[e,t]=i.useState(r),l=i.useCallback(u=>t(a=>a|u),[e]),c=i.useCallback(u=>!!(e&u),[e]),v=i.useCallback(u=>t(a=>a&~u),[t]),d=i.useCallback(u=>t(a=>a^u),[t]);return{flags:e,addFlag:l,hasFlag:c,removeFlag:v,toggleFlag:d}}function pe(r){let e={called:!1};return(...t)=>{if(!e.called)return e.called=!0,r(...t)}}function z(r,...e){r&&e.length>0&&r.classList.add(...e)}function G(r,...e){r&&e.length>0&&r.classList.remove(...e)}function ge(r,e){let t=J();if(!r)return t.dispose;let{transitionDuration:l,transitionDelay:c}=getComputedStyle(r),[v,d]=[l,c].map(u=>{let[a=0]=u.split(",").filter(Boolean).map(o=>o.includes("ms")?parseFloat(o):parseFloat(o)*1e3).sort((o,p)=>p-o);return a});if(v+d!==0){let u=t.addEventListener(r,"transitionend",a=>{a.target===a.currentTarget&&(e(),u())})}else e();return t.add(()=>e()),t.dispose}function be(r,e,t,l){let c=t?"enter":"leave",v=J(),d=l!==void 0?pe(l):()=>{};c==="enter"&&(r.removeAttribute("hidden"),r.style.display="");let u=$(c,{enter:()=>e.enter,leave:()=>e.leave}),a=$(c,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),o=$(c,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return G(r,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),z(r,...u,...o),v.nextFrame(()=>{G(r,...o),z(r,...a),ge(r,()=>(G(r,...u),z(r,...e.entered),d()))}),v.dispose}function Ee({container:r,direction:e,classes:t,onStart:l,onStop:c}){let v=te(),d=X(),u=L(e);_(()=>{let a=J();d.add(a.dispose);let o=r.current;if(o&&u.current!=="idle"&&v.current)return a.dispose(),l.current(u.current),a.add(be(o,t.current,u.current==="enter",()=>{a.dispose(),c.current(u.current)})),a.dispose},[e])}function S(r=""){return r.split(" ").filter(e=>e.trim().length>1)}let O=i.createContext(null);O.displayName="TransitionContext";var Fe=(r=>(r.Visible="visible",r.Hidden="hidden",r))(Fe||{});function Te(){let r=i.useContext(O);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}function Ce(){let r=i.useContext(k);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}let k=i.createContext(null);k.displayName="NestingContext";function A(r){return"children"in r?A(r.children):r.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function ne(r,e){let t=L(r),l=i.useRef([]),c=te(),v=X(),d=x((f,n=R.Hidden)=>{let m=l.current.findIndex(({el:s})=>s===f);m!==-1&&($(n,{[R.Unmount](){l.current.splice(m,1)},[R.Hidden](){l.current[m].state="hidden"}}),v.microTask(()=>{var s;!A(l)&&c.current&&((s=t.current)==null||s.call(t))}))}),u=x(f=>{let n=l.current.find(({el:m})=>m===f);return n?n.state!=="visible"&&(n.state="visible"):l.current.push({el:f,state:"visible"}),()=>d(f,R.Unmount)}),a=i.useRef([]),o=i.useRef(Promise.resolve()),p=i.useRef({enter:[],leave:[],idle:[]}),E=x((f,n,m)=>{a.current.splice(0),e&&(e.chains.current[n]=e.chains.current[n].filter(([s])=>s!==f)),e==null||e.chains.current[n].push([f,new Promise(s=>{a.current.push(s)})]),e==null||e.chains.current[n].push([f,new Promise(s=>{Promise.all(p.current[n].map(([h,g])=>g)).then(()=>s())})]),n==="enter"?o.current=o.current.then(()=>e==null?void 0:e.wait.current).then(()=>m(n)):m(n)}),F=x((f,n,m)=>{Promise.all(p.current[n].splice(0).map(([s,h])=>h)).then(()=>{var s;(s=a.current.shift())==null||s()}).then(()=>m(n))});return i.useMemo(()=>({children:l,register:u,unregister:d,onStart:E,onStop:F,wait:o,chains:p}),[u,d,l,E,F,p,o])}function we(){}let $e=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function W(r){var e;let t={};for(let l of $e)t[l]=(e=r[l])!=null?e:we;return t}function Re(r){let e=i.useRef(W(r));return i.useEffect(()=>{e.current=W(r)},[r]),e}let Se="div",ie=de.RenderStrategy;function xe(r,e){let{beforeEnter:t,afterEnter:l,beforeLeave:c,afterLeave:v,enter:d,enterFrom:u,enterTo:a,entered:o,leave:p,leaveFrom:E,leaveTo:F,...f}=r,n=i.useRef(null),m=Y(n,e),s=f.unmount?R.Unmount:R.Hidden,{show:h,appear:g,initial:ae}=Te(),[T,M]=i.useState(h?"visible":"hidden"),Q=Ce(),{register:P,unregister:N}=Q,B=i.useRef(null);i.useEffect(()=>P(n),[P,n]),i.useEffect(()=>{if(s===R.Hidden&&n.current){if(h&&T!=="visible"){M("visible");return}return $(T,{hidden:()=>N(n),visible:()=>P(n)})}},[T,n,P,N,h,s]);let U=L({enter:S(d),enterFrom:S(u),enterTo:S(a),entered:S(o),leave:S(p),leaveFrom:S(E),leaveTo:S(F)}),D=Re({beforeEnter:t,afterEnter:l,beforeLeave:c,afterLeave:v}),j=Z();i.useEffect(()=>{if(j&&T==="visible"&&n.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[n,T,j]);let I=ae&&!g,ue=(()=>!j||I||B.current===h?"idle":h?"enter":"leave")(),y=he(0),se=x(C=>$(C,{enter:()=>{y.addFlag(w.Opening),D.current.beforeEnter()},leave:()=>{y.addFlag(w.Closing),D.current.beforeLeave()},idle:()=>{}})),oe=x(C=>$(C,{enter:()=>{y.removeFlag(w.Opening),D.current.afterEnter()},leave:()=>{y.removeFlag(w.Closing),D.current.afterLeave()},idle:()=>{}})),H=ne(()=>{M("hidden"),N(n)},Q);Ee({container:n,classes:U,direction:ue,onStart:L(C=>{H.onStart(n,C,se)}),onStop:L(C=>{H.onStop(n,C,oe),C==="leave"&&!A(H)&&(M("hidden"),N(n))})}),i.useEffect(()=>{I&&(s===R.Hidden?B.current=null:B.current=h)},[h,I,T]);let q=f,ce={ref:m};return g&&h&&fe.isServer&&(q={...q,className:ve(f.className,...U.current.enter,...U.current.enterFrom)}),b.createElement(k.Provider,{value:H},b.createElement(me,{value:$(T,{visible:w.Open,hidden:w.Closed})|y.flags},ee({ourProps:ce,theirProps:q,defaultTag:Se,features:ie,visible:T==="visible",name:"Transition.Child"})))}function ye(r,e){let{show:t,appear:l=!1,unmount:c,...v}=r,d=i.useRef(null),u=Y(d,e);Z();let a=re();if(t===void 0&&a!==null&&(t=(a&w.Open)===w.Open),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[o,p]=i.useState(t?"visible":"hidden"),E=ne(()=>{p("hidden")}),[F,f]=i.useState(!0),n=i.useRef([t]);_(()=>{F!==!1&&n.current[n.current.length-1]!==t&&(n.current.push(t),f(!1))},[n,t]);let m=i.useMemo(()=>({show:t,appear:l,initial:F}),[t,l,F]);i.useEffect(()=>{if(t)p("visible");else if(!A(E))p("hidden");else{let h=d.current;if(!h)return;let g=h.getBoundingClientRect();g.x===0&&g.y===0&&g.width===0&&g.height===0&&p("hidden")}},[t,E]);let s={unmount:c};return b.createElement(k.Provider,{value:E},b.createElement(O.Provider,{value:m},ee({ourProps:{...s,as:i.Fragment,children:b.createElement(le,{ref:u,...s,...v})},theirProps:{},defaultTag:i.Fragment,features:ie,visible:o==="visible",name:"Transition"})))}function Le(r,e){let t=i.useContext(O)!==null,l=re()!==null;return b.createElement(b.Fragment,null,!t&&l?b.createElement(V,{ref:e,...r}):b.createElement(le,{ref:e,...r}))}let V=K(ye),le=K(xe),Pe=K(Le),He=Object.assign(V,{Child:Pe,Root:V});export{te as f,He as t};
//# sourceMappingURL=transition-ad75749a.js.map
