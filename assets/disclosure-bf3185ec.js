import{R as b,r as n}from"./index-ec8b93d8.js";import{S as B,D as g,y as C,T as H,b as k,c as K,u as T,d as v,X as R,C as N}from"./open-closed-50e7a81e.js";import{I as O,e as U,o as S,r as F}from"./keyboard-c534a18f.js";import{s as j}from"./use-resolve-button-type-5514e10c.js";var M;let q=(M=b.startTransition)!=null?M:function(e){e()};var z=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(z||{}),A=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(A||{});let Q={[0]:e=>({...e,disclosureState:T(e.disclosureState,{[0]:1,[1]:0})}),[1]:e=>e.disclosureState===1?e:{...e,disclosureState:1},[4](e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},[5](e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},[2](e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},[3](e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},$=n.createContext(null);$.displayName="DisclosureContext";function x(e){let t=n.useContext($);if(t===null){let s=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,x),s}return t}let h=n.createContext(null);h.displayName="DisclosureAPIContext";function L(e){let t=n.useContext(h);if(t===null){let s=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,L),s}return t}let w=n.createContext(null);w.displayName="DisclosurePanelContext";function V(){return n.useContext(w)}function X(e,t){return T(t.type,Q,e,t)}let Y=n.Fragment;function Z(e,t){let{defaultOpen:s=!1,...a}=e,P=n.useRef(null),l=C(t,H(c=>{P.current=c},e.as===void 0||e.as===n.Fragment)),o=n.useRef(null),m=n.useRef(null),u=n.useReducer(X,{disclosureState:s?0:1,linkedPanel:!1,buttonRef:m,panelRef:o,buttonId:null,panelId:null}),[{disclosureState:i,buttonId:d},y]=u,p=k(c=>{y({type:1});let r=U(P);if(!r||!d)return;let f=(()=>c?c instanceof HTMLElement?c:c.current instanceof HTMLElement?c.current:r.getElementById(d):r.getElementById(d))();f==null||f.focus()}),I=n.useMemo(()=>({close:p}),[p]),E=n.useMemo(()=>({open:i===0,close:p}),[i,p]),D={ref:l};return b.createElement($.Provider,{value:u},b.createElement(h.Provider,{value:I},b.createElement(K,{value:T(i,{[0]:v.Open,[1]:v.Closed})},R({ourProps:D,theirProps:a,slot:E,defaultTag:Y,name:"Disclosure"}))))}let G="button";function J(e,t){let s=O(),{id:a=`headlessui-disclosure-button-${s}`,...P}=e,[l,o]=x("Disclosure.Button"),m=V(),u=m===null?!1:m===l.panelId,i=n.useRef(null),d=C(i,t,u?null:l.buttonRef);n.useEffect(()=>{if(!u)return o({type:2,buttonId:a}),()=>{o({type:2,buttonId:null})}},[a,o,u]);let y=k(r=>{var f;if(u){if(l.disclosureState===1)return;switch(r.key){case S.Space:case S.Enter:r.preventDefault(),r.stopPropagation(),o({type:0}),(f=l.buttonRef.current)==null||f.focus();break}}else switch(r.key){case S.Space:case S.Enter:r.preventDefault(),r.stopPropagation(),o({type:0});break}}),p=k(r=>{switch(r.key){case S.Space:r.preventDefault();break}}),I=k(r=>{var f;F(r.currentTarget)||e.disabled||(u?(o({type:0}),(f=l.buttonRef.current)==null||f.focus()):o({type:0}))}),E=n.useMemo(()=>({open:l.disclosureState===0}),[l]),D=j(e,i),c=u?{ref:d,type:D,onKeyDown:y,onClick:I}:{ref:d,id:a,type:D,"aria-expanded":e.disabled?void 0:l.disclosureState===0,"aria-controls":l.linkedPanel?l.panelId:void 0,onKeyDown:y,onKeyUp:p,onClick:I};return R({ourProps:c,theirProps:P,slot:E,defaultTag:G,name:"Disclosure.Button"})}let W="div",_=B.RenderStrategy|B.Static;function ee(e,t){let s=O(),{id:a=`headlessui-disclosure-panel-${s}`,...P}=e,[l,o]=x("Disclosure.Panel"),{close:m}=L("Disclosure.Panel"),u=C(t,l.panelRef,I=>{q(()=>o({type:I?4:5}))});n.useEffect(()=>(o({type:3,panelId:a}),()=>{o({type:3,panelId:null})}),[a,o]);let i=N(),d=(()=>i!==null?(i&v.Open)===v.Open:l.disclosureState===0)(),y=n.useMemo(()=>({open:l.disclosureState===0,close:m}),[l,m]),p={ref:u,id:a};return b.createElement(w.Provider,{value:l.panelId},R({ourProps:p,theirProps:P,slot:y,defaultTag:W,features:_,visible:d,name:"Disclosure.Panel"}))}let te=g(Z),ne=g(J),le=g(ee),ae=Object.assign(te,{Button:ne,Panel:le});export{ae as v};
//# sourceMappingURL=disclosure-bf3185ec.js.map
