import{a as h,j as r,F as ce}from"./jsx-runtime-9d2cd5de.js";import{r as m,R as H}from"./index-580b8df0.js";import{X as ue}from"./index-d638a58e.js";import{C as V}from"./index-f976a069.js";import{L as de}from"./Link-165e77a9.js";import{F as X}from"./dialog-37dabc7d.js";import{v as B}from"./disclosure-251f59c3.js";import{j as J,L as _,y as j,o as I,c as me,u as se,d as A,D as O,p as ie,C as fe,l as D,m as K}from"./open-closed-6ab898d8.js";import{L as pe,I as q,h as he,F as ve,o as g,r as be,v as ge,a as Y,g as oe,A as xe}from"./keyboard-09f27566.js";import{F as ye,u as ke,a as F,x as Ie}from"./use-tracked-pointer-40c2495e.js";import{s as Ne}from"./use-resolve-button-type-6b4df908.js";import{n as we}from"./use-event-listener-87065351.js";import{t as R}from"./transition-ad75749a.js";import{L as M}from"./popover-6662df09.js";import"./_commonjsHelpers-042e6b4d.js";import"./iframe-2bb6c039.js";import"../sb-preview/runtime.mjs";import"./platform-ae94fb3f.js";import"./index-1eb27dd0.js";var Fe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Fe||{}),Se=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Se||{}),Re=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(Re||{});function U(e,c=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,a=xe(c(e.items.slice()),f=>f.dataRef.current.domRef.current),s=o?a.indexOf(o):null;return s===-1&&(s=null),{items:a,activeItemIndex:s}}let $e={[1](e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},[0](e){return e.menuState===0?e:{...e,menuState:0}},[2]:(e,c)=>{var o;let a=U(e),s=Ie(c,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});return{...e,...a,searchQuery:"",activeItemIndex:s,activationTrigger:(o=c.trigger)!=null?o:1}},[3]:(e,c)=>{let o=e.searchQuery!==""?0:1,a=e.searchQuery+c.value.toLowerCase(),s=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(u=>{var t;return((t=u.dataRef.current.textValue)==null?void 0:t.startsWith(a))&&!u.dataRef.current.disabled}),f=s?e.items.indexOf(s):-1;return f===-1||f===e.activeItemIndex?{...e,searchQuery:a}:{...e,searchQuery:a,activeItemIndex:f,activationTrigger:1}},[4](e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},[5]:(e,c)=>{let o=U(e,a=>[...a,{id:c.id,dataRef:c.dataRef}]);return{...e,...o}},[6]:(e,c)=>{let o=U(e,a=>{let s=a.findIndex(f=>f.id===c.id);return s!==-1&&a.splice(s,1),a});return{...e,...o,activationTrigger:1}}},z=m.createContext(null);z.displayName="MenuContext";function Q(e){let c=m.useContext(z);if(c===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Q),o}return c}function Pe(e,c){return se(c.type,$e,e,c)}let Te=m.Fragment;function Ce(e,c){let o=m.useReducer(Pe,{menuState:1,buttonRef:m.createRef(),itemsRef:m.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:a,itemsRef:s,buttonRef:f},u]=o,t=j(c);pe([f,s],(y,S)=>{var l;u({type:1}),he(S,ve.Loose)||(y.preventDefault(),(l=f.current)==null||l.focus())},a===0);let d=I(()=>{u({type:1})}),v=m.useMemo(()=>({open:a===0,close:d}),[a,d]),N=e,x={ref:t};return H.createElement(z.Provider,{value:o},H.createElement(me,{value:se(a,{[0]:A.Open,[1]:A.Closed})},O({ourProps:x,theirProps:N,slot:v,defaultTag:Te,name:"Menu"})))}let De="button";function Me(e,c){var o;let a=q(),{id:s=`headlessui-menu-button-${a}`,...f}=e,[u,t]=Q("Menu.Button"),d=j(u.buttonRef,c),v=ie(),N=I(i=>{switch(i.key){case g.Space:case g.Enter:case g.ArrowDown:i.preventDefault(),i.stopPropagation(),t({type:0}),v.nextFrame(()=>t({type:2,focus:F.First}));break;case g.ArrowUp:i.preventDefault(),i.stopPropagation(),t({type:0}),v.nextFrame(()=>t({type:2,focus:F.Last}));break}}),x=I(i=>{switch(i.key){case g.Space:i.preventDefault();break}}),y=I(i=>{if(be(i.currentTarget))return i.preventDefault();e.disabled||(u.menuState===0?(t({type:1}),v.nextFrame(()=>{var p;return(p=u.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})})):(i.preventDefault(),t({type:0})))}),S=m.useMemo(()=>({open:u.menuState===0}),[u]),l={ref:d,id:s,type:Ne(e,u.buttonRef),"aria-haspopup":"menu","aria-controls":(o=u.itemsRef.current)==null?void 0:o.id,"aria-expanded":e.disabled?void 0:u.menuState===0,onKeyDown:N,onKeyUp:x,onClick:y};return O({ourProps:l,theirProps:f,slot:S,defaultTag:De,name:"Menu.Button"})}let Ee="div",Le=J.RenderStrategy|J.Static;function Ae(e,c){var o,a;let s=q(),{id:f=`headlessui-menu-items-${s}`,...u}=e,[t,d]=Q("Menu.Items"),v=j(t.itemsRef,c),N=we(t.itemsRef),x=ie(),y=fe(),S=(()=>y!==null?(y&A.Open)===A.Open:t.menuState===0)();m.useEffect(()=>{let n=t.itemsRef.current;n&&t.menuState===0&&n!==(N==null?void 0:N.activeElement)&&n.focus({preventScroll:!0})},[t.menuState,t.itemsRef,N]),ye({container:t.itemsRef.current,enabled:t.menuState===0,accept(n){return n.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}});let l=I(n=>{var C,b;switch(x.dispose(),n.key){case g.Space:if(t.searchQuery!=="")return n.preventDefault(),n.stopPropagation(),d({type:3,value:n.key});case g.Enter:if(n.preventDefault(),n.stopPropagation(),d({type:1}),t.activeItemIndex!==null){let{dataRef:w}=t.items[t.activeItemIndex];(b=(C=w.current)==null?void 0:C.domRef.current)==null||b.click()}oe(t.buttonRef.current);break;case g.ArrowDown:return n.preventDefault(),n.stopPropagation(),d({type:2,focus:F.Next});case g.ArrowUp:return n.preventDefault(),n.stopPropagation(),d({type:2,focus:F.Previous});case g.Home:case g.PageUp:return n.preventDefault(),n.stopPropagation(),d({type:2,focus:F.First});case g.End:case g.PageDown:return n.preventDefault(),n.stopPropagation(),d({type:2,focus:F.Last});case g.Escape:n.preventDefault(),n.stopPropagation(),d({type:1}),K().nextFrame(()=>{var w;return(w=t.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})});break;case g.Tab:n.preventDefault(),n.stopPropagation(),d({type:1}),K().nextFrame(()=>{ge(t.buttonRef.current,n.shiftKey?Y.Previous:Y.Next)});break;default:n.key.length===1&&(d({type:3,value:n.key}),x.setTimeout(()=>d({type:4}),350));break}}),i=I(n=>{switch(n.key){case g.Space:n.preventDefault();break}}),p=m.useMemo(()=>({open:t.menuState===0}),[t]),k={"aria-activedescendant":t.activeItemIndex===null||(o=t.items[t.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(a=t.buttonRef.current)==null?void 0:a.id,id:f,onKeyDown:l,onKeyUp:i,role:"menu",tabIndex:0,ref:v};return O({ourProps:k,theirProps:u,slot:p,defaultTag:Ee,features:Le,visible:S,name:"Menu.Items"})}let _e=m.Fragment;function je(e,c){let o=q(),{id:a=`headlessui-menu-item-${o}`,disabled:s=!1,...f}=e,[u,t]=Q("Menu.Item"),d=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===a:!1,v=m.useRef(null),N=j(c,v);D(()=>{if(u.menuState!==0||!d||u.activationTrigger===0)return;let b=K();return b.requestAnimationFrame(()=>{var w,G;(G=(w=v.current)==null?void 0:w.scrollIntoView)==null||G.call(w,{block:"nearest"})}),b.dispose},[v,d,u.menuState,u.activationTrigger,u.activeItemIndex]);let x=m.useRef({disabled:s,domRef:v});D(()=>{x.current.disabled=s},[x,s]),D(()=>{var b,w;x.current.textValue=(w=(b=v.current)==null?void 0:b.textContent)==null?void 0:w.toLowerCase()},[x,v]),D(()=>(t({type:5,id:a,dataRef:x}),()=>t({type:6,id:a})),[x,a]);let y=I(()=>{t({type:1})}),S=I(b=>{if(s)return b.preventDefault();t({type:1}),oe(u.buttonRef.current)}),l=I(()=>{if(s)return t({type:2,focus:F.Nothing});t({type:2,focus:F.Specific,id:a})}),i=ke(),p=I(b=>i.update(b)),k=I(b=>{i.wasMoved(b)&&(s||d||t({type:2,focus:F.Specific,id:a,trigger:0}))}),n=I(b=>{i.wasMoved(b)&&(s||d&&t({type:2,focus:F.Nothing}))}),C=m.useMemo(()=>({active:d,disabled:s,close:y}),[d,s,y]);return O({ourProps:{id:a,ref:N,role:"menuitem",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,disabled:void 0,onClick:S,onFocus:l,onPointerEnter:p,onMouseEnter:p,onPointerMove:k,onMouseMove:k,onPointerLeave:n,onMouseLeave:n},theirProps:f,slot:C,defaultTag:_e,name:"Menu.Item"})}let Oe=_(Ce),Qe=_(Me),Ve=_(Ae),Be=_(je),E=Object.assign(Oe,{Button:Qe,Items:Ve,Item:Be});const L={dropDownTitles:"inline-flex justify-center text-sm font-medium text-cu-black-800 group hover:text-cu-red",chevron:"flex-shrink-0 w-5 h-5 ml-1 text-cu-black-300 group-hover:text-cu-black-600"};function Z(...e){return e.filter(Boolean).join(" ")}const T=({sortOptions:e,filters:c,callback:o})=>{const[a,s]=m.useState(!1),[f,u]=m.useState(""),[t,d]=m.useState([]),v=l=>t.includes(l),[N,x]=m.useState([]),y=l=>{const i=l;return t.includes(i)?d([...t].filter(p=>p!==i)):d([...t,i])},S=l=>{const i=l;return d([...t].filter(p=>p!==i))};return m.useEffect(()=>{u(f),x(t)},[f,t]),m.useEffect(()=>{o(t)},[t,o]),h("div",{className:"not-prose",children:[r(R.Root,{show:a,as:m.Fragment,children:h(X,{as:"div",className:"relative z-40 sm:hidden",onClose:s,children:[r(R.Child,{as:m.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:r("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),r("div",{className:"fixed inset-0 z-40 flex",children:r(R.Child,{as:m.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:h(X.Panel,{className:"relative ml-auto flex h-full w-full max-w-xs flex-col overflow-y-auto bg-white shadow-xl",children:[h("div",{className:"flex items-center justify-between bg-cu-black-50 px-4 py-3",children:[r("h2",{className:"text-base font-medium text-cu-black-800",children:"Filters"}),h("button",{type:"button",className:"-mr-1 flex h-8 w-8 items-center justify-center rounded-md bg-white p-2 text-cu-black-600",onClick:()=>s(!1),children:[r("span",{className:"sr-only",children:"Close menu"}),r(ue,{className:"h-6 w-6","aria-hidden":"true"})]})]}),r("form",{children:c.map(l=>r(B,{as:"div",className:"border-t border-cu-black-100 px-4 py-6",children:({open:i})=>h(ce,{children:[r("h3",{className:"group -mx-2 -my-3 flow-root",children:h(B.Button,{className:"flex w-full items-center justify-between bg-white px-2 py-3 text-sm text-cu-black-300 group-hover:text-cu-black-600",children:[r("span",{className:"font-medium text-cu-black-600",children:l.name}),r("span",{className:"ml-6 flex items-center",children:r(V,{className:Z(i?"-rotate-180":"rotate-0","h-5 w-5 transform"),"aria-hidden":"true"})})]})}),r(B.Panel,{className:"pt-6",children:r("div",{className:"space-y-6",children:l.options.map((p,k)=>h("div",{className:"flex items-center",children:[r("input",{id:`filter-mobile-${l.id}-${k}`,name:`${l.id}[]`,defaultValue:p.label,type:"checkbox",onChange:()=>y(p.label),defaultChecked:v(p.label),className:"h-4 w-4 rounded border-cu-black-200 text-cu-red focus:ring-cu-red-100"}),r("label",{htmlFor:`filter-mobile-${l.id}-${k}`,className:"ml-3 text-sm text-cu-black-600",children:p.label})]},k))})})]})},l.name))})]})})})]})}),h("section",{"aria-labelledby":"filter-heading",children:[r("h2",{id:"filter-heading",className:"sr-only",children:"Filters"}),r("div",{className:"rounded-tl-lg rounded-tr-lg border border-cu-black-100 bg-gray-50 py-4",children:h("div",{className:"flex justify-between px-4 sm:px-6",children:[h(E,{as:"div",className:"relative",children:[e&&(e==null?void 0:e.length)>0&&r("div",{children:h(E.Button,{className:L.dropDownTitles,children:["Sort",r(V,{className:L.chevron,"aria-hidden":"true"})]})}),r(R,{as:m.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:r(E.Items,{className:"absolute -left-4 z-10 mt-2 w-40 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e&&(e==null?void 0:e.length)>0&&r("div",{className:"py-1",children:e.map(l=>r(E.Item,{children:({active:i})=>r(de,{href:l.href,className:Z(l.name===f?"font-medium text-cu-black-800":"text-cu-black-600",i?"bg-gray-100":"","block px-4 py-2 text-sm")})},l.name))})})})]}),r("button",{type:"button",className:"inline-block text-sm font-medium text-cu-black-800 hover:text-cu-red sm:hidden",onClick:()=>s(!0),children:"Filters"}),r("div",{className:"hidden sm:block",children:r("div",{className:"flow-root",children:r(M.Group,{className:"-mx-4 flex items-center divide-x divide-gray-200",children:c.map((l,i)=>h(M,{className:"relative inline-block px-4 text-left",children:[h(M.Button,{className:L.dropDownTitles,children:[r("span",{children:l.name}),r(V,{className:L.chevron,"aria-hidden":"true"})]}),r(R,{as:m.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:r(M.Panel,{className:"absolute right-0 z-10 mt-2 rounded-md bg-white p-4 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:r("form",{className:"space-y-4",children:l.options.map((p,k)=>h("div",{className:"flex items-center",children:[r("input",{id:`filter-${l.id}-${k}`,name:`${l.id}[]`,defaultValue:p.label,type:"checkbox",onChange:()=>y(p.label),defaultChecked:v(p.label),className:"h-4 w-4 rounded border-cu-black-200 text-cu-red focus:ring-cu-red-100"}),r("label",{htmlFor:`filter-${l.id}-${k}`,className:"ml-3 whitespace-nowrap pr-6 text-sm text-cu-black-600",children:p.label})]},k))})})})]},i))})})})]})}),r("div",{className:"rounded-bl-lg rounded-br-lg border border-t-0 border-cu-black-100 bg-white",children:h("div",{className:"px-4 py-3 sm:flex sm:items-center sm:px-6",children:[h("h3",{className:"py-1 text-sm text-cu-black-600",children:["Filters",r("span",{className:"sr-only",children:", active"})]}),r("div",{"aria-hidden":"true",className:"hidden h-5 w-px bg-gray-300 sm:ml-4 sm:block"}),r("div",{className:"mt-4 sm:mt-0 sm:ml-4",children:r("div",{className:"-m-1 flex flex-wrap items-center gap-3",children:N.map((l,i)=>h("span",{className:"inline-flex items-center rounded-lg border border-cu-black-100 bg-white py-1 pl-3 pr-2 text-sm text-cu-black-600",children:[r("span",{children:l}),h("button",{type:"button",onClick:()=>S(l),className:"ml-1 inline-flex h-4 w-4 flex-shrink-0 rounded-full p-1 text-cu-black-400 hover:bg-cu-red hover:text-white",children:[h("span",{className:"sr-only",children:["Remove filter for ",l]}),r("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:r("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})]})]},i))})})]})})]})]})};try{T.displayName="Filter",T.__docgenInfo={description:"",displayName:"Filter",props:{sortOptions:{defaultValue:null,description:"",name:"sortOptions",required:!1,type:{name:"{ name: string; href: string; current: boolean; }[]"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"{ id: string; name: string; options: { value: string; label: string; checked: boolean; }[]; }[]"}},callback:{defaultValue:null,description:"",name:"callback",required:!0,type:{name:"(k: string[]) => void"}}}}}catch{}const W={title:"Filter",classname:".filter",sortOptions:[{name:"Daily",href:"#",current:!1},{name:"Weekly",href:"#",current:!1},{name:"Monthly",href:"#",current:!1}],filters:[{id:"audience",name:"Audience",options:[{value:"staff",label:"Staff",checked:!1},{value:"student",label:"Student",checked:!1}]},{id:"tags",name:"Tags",options:[{value:"general",label:"General",checked:!1},{value:"online/virtual",label:"Online/Virtual",checked:!1},{value:"finances",label:"Finances",checked:!1},{value:"healthyworkplace",label:"Healthy Workplace",checked:!1}]}]},ot={title:"Components/Filter",component:T,tags:["autodocs"],parameters:{controls:{sort:"requiredFirst"}}},$=()=>r(T,{filters:W.filters,callback:()=>{},sortOptions:W.sortOptions}),P=()=>r(T,{filters:W.filters,callback:()=>{}});$.storyName="With Sorting";P.storyName="Without Sorting";var ee,te,re;$.parameters={...$.parameters,docs:{...(ee=$.parameters)==null?void 0:ee.docs,source:{originalSource:`() => {
  return <Filter filters={FilterData.filters} callback={() => undefined} sortOptions={FilterData.sortOptions} />;
}`,...(re=(te=$.parameters)==null?void 0:te.docs)==null?void 0:re.source}}};var ae,ne,le;P.parameters={...P.parameters,docs:{...(ae=P.parameters)==null?void 0:ae.docs,source:{originalSource:`() => {
  return <Filter filters={FilterData.filters} callback={() => undefined} />;
}`,...(le=(ne=P.parameters)==null?void 0:ne.docs)==null?void 0:le.source}}};const ct=["Default","NoSorting"];export{$ as Default,P as NoSorting,ct as __namedExportsOrder,ot as default};
//# sourceMappingURL=Filter.stories-1541d3bc.js.map
